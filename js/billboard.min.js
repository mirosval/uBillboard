/*

 uBillboard - Premium Slide for WordPress

 Version: 3.0.2

 Copyright: uDesignStudios (Miroslav Zoricak, Jan Keselak) 2011

*/
(function(c){function z(b){try{console.log(b)}catch(c){}}c.extend(jQuery.easing,{easeInOutQuad:function(b,c,u,i,j){return(c/=j/2)<1?i/2*c*c+u:-i/2*(--c*(c-2)-1)+u}});c.fn.uBillboard=function(b){var g,u,i,j,o,A,w,k,y,h,q,m,s,r={init:function(a,e){g=c(this);u=c(".uds-bb-slides",g);b=c.extend(a,e);g.css("overflow","visible");g.add(u).css({width:b.width,height:b.height});q={};s=!1;f.initSlides();f.initAnimationMarkup();f.initPreloader();var d=f.preloadImages();f.initControls();c(".uds-bb-slides",g).live("click",
function(){var a=h[m];if(typeof a.link==="string"&&a.link!==""&&a.link!=="#")window.location=a.link});d===!1&&(g.trigger("udsBillboardLoadingDidComplete"),f.loadingCompleted());g.bind("udsBillboardTransitionDidComplete",function(){})},animateSlide:function(a){if(a!==m)if(h[a]===null)c.error("Slide ID "+a+" does not exist");else{g.trigger("udsBillboardSlideWillChange",m);var e=h[a];f.prepareForAnimation(a);(e.transition=="none"||e.bg=="")&&i.css({backgroundColor:e.bgColor,backgroundImage:"none"});
f.handleEmbeddedContent(e);var d="fade";if(e.transition!==null&&typeof e.transition==="string")d=e.transition;if(n[d]===null||typeof n[d]!=="object")c.error('Transition "'+d+'" is not defined');else{n[d].direction=e.direction;j.show().css("opacity",1);n[d].setup!==null&&typeof n[d].setup==="function"&&n[d].setup();n[d].perform!==null&&typeof n[d].perform==="function"&&n[d].perform();var l=1E3;if(n[d].duration!==null&&typeof n[d].duration==="number")l=n[d].duration;clearTimeout(q.transitionComplete);
q.transitionComplete=setTimeout(function(){i.stop().html(e.html).css({top:"0px",left:"0px",opacity:1,backgroundImage:"url("+e.bg+")"});j.stop().hide();g.trigger("udsBillboardTransitionDidComplete",a)},l);m=a;g.trigger("udsBillboardSlideDidChange",m);b.pauseOnVideo&&h[m].transition=="none"||(s&&f.animateCountdown(h[m].delay),(b.autoplay||s)&&r.play())}}},next:function(){var a=f.getNextSlideId();r.animateSlide(a)},prev:function(){var a=f.getPrevSlideId();r.animateSlide(a)},random:function(){r.animateSlide(Math.floor(Math.random()*
h.length+1))},play:function(){if(typeof m!=="number"||m===null)m=0;q!==null&&q.nextSlideAnimation!==null&&clearTimeout(q.nextSlideAnimation);typeof k!=="undefined"&&k!==null&&k.show();s||f.animateCountdown(h[m].delay);clearTimeout(q.nextSlideAnimation);q.nextSlideAnimation=setTimeout(function(){r.next()},h[m].delay);s=!0;g.trigger("didChangePlayingState",{playing:s})},pause:function(){s=!1;g.trigger("didChangePlayingState",{playing:s});q.nextSlideAnimation!==null&&clearTimeout(q.nextSlideAnimation);
typeof k!=="undefined"&&k.hide()},playpause:function(){s?r.pause():r.play()}},f={initSlides:function(){h=[];c(".uds-bb-slide",g).each(function(a,b){var d={delay:parseInt(c(".uds-delay",b).remove().text(),10),transition:c(".uds-transition",b).remove().text(),direction:c(".uds-direction",b).remove().text(),bgColor:c(".uds-background",b).remove().text(),bg:c(".uds-bb-bg-image",b).remove().attr("src"),link:c(".uds-bb-link",b).remove().attr("href"),html:c(b).remove().html()};h.push(d)})},initPreloader:function(){g.append('<div class="uds-bb-preloader-wrapper"><div class="uds-bb-preloader"><div class="uds-bb-preloader-indicator"></div></div></div>');
y=c(".uds-bb-preloader-wrapper",g);var a=c(".uds-bb-preloader-indicator",y);c(".uds-bb-preloader").css({top:parseInt(b.height,10)/2-a.height()/2+"px",left:parseInt(b.width,10)/2-a.width()/2+"px"})},updatePreloader:function(a){var b=c(".uds-bb-preloader-indicator",y);b.stop().animate({left:"-"+Math.round((1-a)*b.width())+"px"},200);a>=1&&b.fadeOut("200",function(){y.remove()})},preloadImages:function(){for(var a=0,e=h.length,d=!1,l=0;l<e;l++)h[l].bg!==""&&(d=!0);if(!d)return f.updatePreloader(1),g.trigger("udsBillboardLoadingDidComplete"),
f.loadingCompleted(),!1;for(l=0;l<e;l++)h[l].bg===""?++a:c("<img>").data("slideID",l).load(function(){++a;f.updatePreloader(a/e);a==e&&(g.trigger("udsBillboardLoadingDidComplete"),f.loadingCompleted())}).error(function(){var d=c(this).data("slideID");z("Failed to load image: "+h[d].bg);++a;f.updatePreloader(a/e);a==e&&(g.trigger("udsBillboardLoadingDidComplete"),f.loadingCompleted());b.removeSlidesWithBrokenImages===!0&&h.splice(d,1)}).attr("src",h[l].bg);return!0},loadingCompleted:function(){m=0;
var a=h[m],c=f.getSlideBackgroundCSS(a);i.css(c).html(a.html).fadeTo(300,1);f.handleEmbeddedContent(a);w.delay(300).fadeTo(300,1);a=b.pauseOnVideo&&a.transition=="none";b.autoplay===!0&&!a?(f.animateCountdown(h[m].delay),r.play()):typeof k!=="undefined"&&k!==null&&k.hide()},initAnimationMarkup:function(){c(".uds-bb-slides",g).append("<div class='uds-stage'>").append("<div class='uds-next'>");i=c(".uds-stage",g);j=c(".uds-next",g);j.hide();c(i).add(j).css({width:b.width,height:b.height,opacity:0});
for(var a=parseInt(b.width,10),e=parseInt(b.height,10),d=parseInt(b.squareSize,10),a=Math.ceil(a/d),e=Math.ceil(e/d),d=0;d<e;d++)for(var l=0;l<a;l++)c("<div>",{"class":"uds-square uds-column-"+l+" uds-row-"+d+" uds-square-"+(l+a*d)}).data("position",{x:l,y:d}).append(c("<div>",{"class":"uds-square-inside"})).appendTo(j);f.resetAnimation();o=c(".uds-square",g);A=c(".uds-square-inside",g);w=c(".uds-bb-controls",g);f.createCountdown()},resetAnimation:function(){for(var a=parseInt(b.width,10),e=parseInt(b.height,
10),d=parseInt(b.squareSize,10),l=Math.ceil(a/d),f=Math.ceil(e/d),h=0;h<f;h++)for(var p=0;p<l;p++)c(".uds-square-"+(p+l*h),g).css({width:d,height:d,top:h*d,left:p*d,opacity:1}).stop(!0,!0).find(".uds-square-inside").css({width:a,height:e,top:-(h*d),left:-(p*d),opacity:1}).stop(!0,!0);i.css({opacity:1}).add(j).css({top:"0px",left:"0px"})},prepareForAnimation:function(a){var b=h[m],c=h[a];typeof b==="undefined"||b===null?z("Slide "+m+" does not exist! (Current Slide)"):typeof c==="undefined"||c===null?
z("Slide "+a+" does not exist! (Next Slide)"):(a=f.getSlideBackgroundCSS(b),i.css(a).html(b.html),f.resetAnimation(),c.transition!=="none"&&(a=f.getSlideBackgroundCSS(c),A.css(a).html(c.html)))},initControls:function(){w=c(".uds-bb-controls",g);w.show().css({width:b.width,height:b.height,opacity:0});var a=c(".uds-bb-playpause",g),e=c(".uds-bb-next",g),d=c(".uds-bb-prev",g),l=c(".uds-bb-paginator",g),f=c(".uds-bb-position-indicator-bullets",g),j=c(".uds-bb-thumbnails",g),p=c(".uds-bb-thumb",j);a.click(r.playpause);
e.click(r.next);d.click(r.prev);a.addClass("play");g.bind("didChangePlayingState",function(b,c){a.removeClass("play pause");c.playing?a.addClass("pause"):a.addClass("play")});c(".uds-bb-position-indicator",g).text("1/"+h.length);var k="";for(slide in h)k+="<div class='uds-bb-bullet'></div>";f.append(k).find("div:first").addClass("active");c("div",f).click(function(){r.animateSlide(c(this).index())});g.bind("udsBillboardSlideDidChange",function(){c(".uds-bb-position-indicator").text(m+1+"/"+h.length);
c("div",f).removeClass("active").eq(m).addClass("active");p.css("background-color","").removeClass("active").eq(m).addClass("active").css("background-color",b.thumbnailHoverColor)});p.removeClass("active").eq(0).addClass("active");p.click(function(){r.animateSlide(c(this).index())});g.has(".uds-bb-thumbnails.top:not(.inside)").css("margin-top",j.outerHeight());g.has(".uds-bb-thumbnails.bottom:not(.inside)").css("margin-bottom",j.outerHeight());g.has(".uds-bb-thumbnails.left:not(.inside)").css("margin-left",
j.outerWidth());g.has(".uds-bb-thumbnails.right:not(.inside)").css("margin-right",j.outerWidth());p.each(function(a){var e=c("img",this);e.css({width:e.attr("width")+"px",height:e.attr("height")+"px"});h[a].bg===""&&h[a].transition!=="none"&&(e.replaceWith("<div>"),c("div",this).css({width:e.attr("width")+"px",height:e.attr("height")+"px",backgroundColor:h[a].bgColor}));c(this).is(".active")&&c(this).css("background-color",b.thumbnailHoverColor);var d={r:parseInt(b.thumbnailHoverColor.substr(1,2),
16),g:parseInt(b.thumbnailHoverColor.substr(3,2),16),b:parseInt(b.thumbnailHoverColor.substr(5,2),16)};c(this).hover(function(){c(this).is(".active")?c(this).css("background-color",b.thumbnailHoverColor):c(this).css("background-color","rgb(237,237,237)").stop().animate({opacity:1},{duration:200,step:function(a,b){var c=((new Date).getTime()-b.startTime)/b.options.duration;b.elem.style.backgroundColor="rgb("+(255-Math.round((237-d.r)*c))+","+(255-Math.round((237-d.g)*c))+","+(255-Math.round((237-d.b)*
c))+")"}})},function(){c(this).is(".active")?c(this).css("background-color",b.thumbnailHoverColor):c(this).css("background-color",b.thumbnailHoverColor).stop().animate({opacity:1},{duration:200,step:function(a,b){var c=((new Date).getTime()-b.startTime)/b.options.duration;b.elem.style.backgroundColor="rgb("+(d.r+Math.round((237-d.r)*c))+","+(d.g+Math.round((237-d.g)*c))+","+(d.b+Math.round((237-d.b)*c))+")"}})})});var v,i,o,n=0,s=c(".uds-bb-thumbnail-container",j),u=j.is(".right,.left")?"vertical":
"horizontal";u=="vertical"?(v=j.height(),k=(p.outerHeight(!0)-p.outerHeight())/2,i=p.length*p.outerHeight(!0)-(p.length-1)*k,o="top",s.css("height",i+"px")):(v=j.width(),i=p.length*p.outerWidth(!0),o="left",s.css("width",i+"px"));v>i&&(n=v/2-i/2,s.css(o,n+"px"));j.bind({"mouseenter mousemove":function(a){clearInterval(q.thumbMove);q.thumbMove=setInterval(function(){var b=0,b=0,b=u=="vertical"?a.pageY-j.offset().top:a.pageX-j.offset().left;b-=v/2;b/=v/2;v>i||(b<0&&n>0?n--:b>0&&n<i-v&&n++,s.css(o,-n+
"px"))},10)},mouseleave:function(){clearInterval(q.thumbMove)}});var t=c("");b.showControls==="hover"&&(t=t.add(e).add(d));b.showPause==="hover"&&(t=t.add(a));b.showPaginator==="hover"&&(t=t.add(f).add(c(".uds-bb-position-indicator",g)));b.showThumbnails==="hover"&&(t=t.add(j));b.showPaginator!==!0&&b.showPause!==!0&&b.showControls!==!0&&(t=t.add(l));t.fadeTo(0,0);g.hover(function(){t.stop().fadeTo(300,1)},function(){t.stop().fadeTo(300,0)});b.showControls===!1&&(e.hide(),d.hide());b.showPause===
!1&&a.hide();b.showPaginator===!1&&(f.hide(),c(".uds-bb-position-indicator",g).hide());b.showThumbnails===!1&&j.hide();c(".uds-center",g).each(function(){var a=c(this).outerWidth()/2,d=c(this).outerHeight()/2;c(this).css({top:parseInt(b.height,10)/2-d,left:parseInt(b.width,10)/2-a})});c(".uds-center-vertical",g).each(function(){var a=c(this).outerHeight()/2;c(this).css({top:parseInt(b.height,10)/2-a})});c(".uds-center-horizontal",g).each(function(){var a=c(this).outerWidth()/2;c(this).css({left:parseInt(b.width,
10)/2-a})})},getNextSlideId:function(){var a=m+1;return typeof h[a]==="undefined"?0:a},getPrevSlideId:function(){var a=m-1;return typeof h[a]==="undefined"?h.length-1:a},createCountdown:function(){if(b.showTimer!==!1)k=c('<div class="uds-bb-countdown"></div>').appendTo(w),canvas=k.append('<canvas width="100" height="100">').find("canvas").get(0),canvas.getContext?(ctx=canvas.getContext("2d"),ctx.lineWidth=3,ctx.strokeStyle="white",ctx.shadowOffsetX=0,ctx.shadowOffsetY=0,ctx.shadowBlur=2,ctx.shadowColor=
"black",k.data("context",ctx)):(k.remove(),k=null)},animateCountdown:function(a){if(!(k===null||typeof k==="undefined"||b.showTimer===!1)){var c=k.data("context"),d=0;if(a!==!1){var l=(new Date).getTime();k.data("start",l);k.data("duration",a);clearInterval(q.countDown);q.countDown=setInterval(function(){f.animateCountdown(!1)},30)}else d=(new Date).getTime()-k.data("start"),a=k.data("duration");d/a>=1&&clearInterval(q.countDown);c.clearRect(0,0,100,100);c.beginPath();c.arc(50,50,20,-Math.PI/2,-Math.PI/
2+2*Math.PI*(d/a),!1);c.stroke()}},getSlideBackgroundCSS:function(a){return a.bg!==""?{backgroundColor:"transparent",backgroundImage:"url("+a.bg+")"}:{backgroundColor:a.bgColor,backgroundImage:""}},handleEmbeddedContent:function(a){a.transition=="none"&&(i.html(a.html),$element=c(">*",i),$element.css({position:"absolute",top:parseInt(b.height,10)/2-$element.attr("height")/2,left:parseInt(b.width,10)/2-$element.attr("width")/2}),c("param[name=wmode][value=opaque]",$element).length===0&&($element.prepend('<param name="wmode" value="opaque" />'),
c("embed",$element).attr("wmode","opaque").css({position:"absolute",zIndex:1})))},pos:function(a){return Math.abs(parseInt(a,10))+"px"},neg:function(a){return"-"+Math.abs(parseInt(a,10))+"px"}},x={none:{delay:c.noop},left:{delay:function(){for(var a=Math.ceil(parseInt(b.width,10)/parseInt(b.squareSize,10)),e=0;e<a;e++)c(".uds-column-"+e,g).delay(e*(600/a))}},right:{delay:function(){for(var a=Math.ceil(parseInt(b.width,10)/parseInt(b.squareSize,10)),e=0;e<a;e++)c(".uds-column-"+e,g).delay(600-e*(600/
a))}},top:{delay:function(){for(var a=Math.ceil(parseInt(b.height,10)/parseInt(b.squareSize,10)),e=0;e<a;e++)c(".uds-row-"+e,g).delay(e*(600/a))}},bottom:{delay:function(){for(var a=Math.ceil(parseInt(b.height,10)/parseInt(b.squareSize,10)),e=0;e<a;e++)c(".uds-row-"+e,g).delay(600-e*(600/a))}},center:{delay:function(){for(var a=Math.ceil(parseInt(b.height,10)/parseInt(b.squareSize,10)),e=Math.ceil(parseInt(b.width,10)/parseInt(b.squareSize,10)),d=0;d<e;d++)for(var l=0;l<a;l++){var f=Math.sqrt(Math.pow(d-
e/2+0.5,2)+Math.pow(l-a/2+0.5,2))/Math.sqrt(Math.pow(e/2,2)+Math.pow(a/2,2));c(".uds-square-"+(l*e+d)).delay(700*f)}}},randomSquares:{delay:function(){o.each(function(){c(this).delay(Math.random()*700)})}},spiralIn:{delay:function(){for(var a=Math.ceil(parseInt(b.width,10)/parseInt(b.squareSize,10)),e=Math.ceil(parseInt(b.height,10)/parseInt(b.squareSize,10)),d=0,l=a-1,f=0,g=e-1,j=0,h=0,i=0;j<a*e;)c(".uds-square-"+(a*i+h)).delay(1E3*(j/(a*e))),i==f&&h<l?h++:h==l&&i<g?i++:i==g&&h>d?h--:(i--,i==f&&
(h++,i++,d++,l--,f++,g--)),j++}},spiralOut:{delay:function(){for(var a=Math.ceil(parseInt(b.width,10)/parseInt(b.squareSize,10)),e=Math.ceil(parseInt(b.height,10)/parseInt(b.squareSize,10)),d=0,f=a-1,g=0,h=e-1,j=0,i=0,k=0;j<a*e;)c(".uds-square-"+(a*k+i)).delay(1E3-1E3*(j/(a*e))),k==g&&i<f?i++:i==f&&k<h?k++:k==h&&i>d?i--:(k--,k==g&&(i++,k++,d++,f--,g++,h--)),j++}},chess:{delay:function(){for(var a=Math.ceil(parseInt(b.height,10)/parseInt(b.squareSize,10)),e=Math.ceil(parseInt(b.width,10)/parseInt(b.squareSize,
10)),d=0;d<e;d++)for(var f=0;f<a;f++){var g=f%2==0&&d%2==0||f%2==1&&d%2==1?0:1;c(".uds-square-"+(f*e+d)).delay(200*g)}}},zigzagHorizontal:{delay:function(){for(var a=Math.ceil(parseInt(b.height,10)/parseInt(b.squareSize,10)),e=Math.ceil(parseInt(b.width,10)/parseInt(b.squareSize,10)),d=0;d<e;d++)for(var f=0;f<a;f++){var g=(f*a+(f%2==0?d:e-d))/(a*a+e/2);c(".uds-square-"+(f*e+d)).delay(700*g)}}},zigzagVertical:{delay:function(){for(var a=Math.ceil(parseInt(b.height,10)/parseInt(b.squareSize,10)),e=
Math.ceil(parseInt(b.width,10)/parseInt(b.squareSize,10)),d=0;d<e;d++)for(var f=0;f<a;f++){var g=(d*e+(d%2==0?f:a-f))/(e*e+a/2);c(".uds-square-"+(f*e+d)).delay(700*g)}}}},n={none:{duration:0,direction:"",setup:function(){j.hide()},perform:c.noop()},fade:{duration:1E3,direction:"",setup:function(){o.css({opacity:0})},perform:function(){x[this.direction].delay();o.animate({opacity:1},{duration:500})}},crossFade:{duration:1E3,direction:"",setup:function(){o.css({opacity:0})},perform:function(){x[this.direction].delay();
i.animate({opacity:0},{duration:1E3});o.animate({opacity:1},{duration:500})}},slide:{duration:700,direction:"right",setup:function(){c(".uds-bb-slides",g).css({overflow:"hidden"});i.css({top:"0px",left:"0px"});if(this.direction==="left")j.show().css({top:"0px",left:f.neg(b.width)});else if(this.direction==="top")j.show().css({top:f.neg(b.height),left:"0px"});else if(this.direction==="bottom")j.show().css({top:f.pos(b.height),left:"0px"});else if(this.direction==="top")j.show().css({top:"0px",left:f.pos(b.width)});
else if(this.direction==="zigzagHorizontal"){parseInt(b.squareSize,10);var a=parseInt(b.height,10);o.each(function(){c(this).css({opacity:0,top:parseInt(c(this).css("top"),10)-a+"px"})});x[this.direction].delay()}else if(this.direction==="zigzagVertical"){parseInt(b.squareSize,10);var e=parseInt(b.width,10);o.each(function(){c(this).css({opacity:0,left:parseInt(c(this).css("left"),10)-e+"px"})});x[this.direction].delay()}else j.show().css({top:"0px",left:f.pos(b.width)})},perform:function(){var a=
{duration:700,easing:"easeInOutQuad"};if(this.direction==="left")i.animate({left:f.pos(b.width)},a),j.animate({left:"0px"},a);else if(this.direction==="top")i.animate({top:f.pos(b.height)},a),j.animate({top:"0px"},a);else if(this.direction==="bottom")i.animate({top:f.neg(b.height)},a),j.animate({top:"0px"},a);else if(this.direction==="top")i.animate({left:f.neg(b.width)},a),j.animate({left:"0px"},a);else if(this.direction==="zigzagHorizontal"){parseInt(b.squareSize,10);var e=parseInt(b.height,10);
o.each(function(){c(this).animate({opacity:1,top:parseInt(c(this).css("top"),10)+e+"px"},a)})}else if(this.direction==="zigzagVertical"){parseInt(b.squareSize,10);var d=parseInt(b.width,10);o.each(function(){c(this).animate({opacity:1,left:parseInt(c(this).css("left"),10)+d+"px"},a)})}else i.animate({left:f.neg(b.width)},a),j.animate({left:"0px"},a)}},scale:{duration:1100,direction:"",setup:function(){var a,e;if(this.direction==="right")a=f.pos(parseInt(b.height,10)/2),e=f.pos(b.width);else if(this.direction===
"left")a=f.pos(parseInt(b.height,10)/2),e="0px";else if(this.direction==="top")a="0px",e=f.pos(parseInt(b.width,10)/2);else if(this.direction==="bottom")a=f.pos(b.height),e=f.pos(parseInt(b.width,10)/2);else if(this.direction==="center")a=f.pos(parseInt(b.height,10)/2),e=f.pos(parseInt(b.width,10)/2);else{if(this.direction==="zigzagHorizontal"){var d=parseInt(b.squareSize,10);o.each(function(){c(this).css({top:parseInt(c(this).css("top"),10)+d/2+"px",left:parseInt(c(this).css("left"),10)+d/2+"px",
height:"0px"})})}else this.direction==="zigzagVertical"?(d=parseInt(b.squareSize,10),o.each(function(){c(this).css({top:parseInt(c(this).css("top"),10)+d/2+"px",left:parseInt(c(this).css("left"),10)+d/2+"px",width:"0px"})})):(d=parseInt(b.squareSize,10),o.each(function(){c(this).css({top:parseInt(c(this).css("top"),10)+d/2+"px",left:parseInt(c(this).css("left"),10)+d/2+"px",width:"0px",height:"0px"})}));x[this.direction].delay();return}j.css({top:a,left:e,width:"1px",height:"1px"})},perform:function(){if(c.inArray(this.direction,
["center","top","left","bottom","right"])>-1)j.animate({top:"0px",left:"0px",width:b.width,height:b.height},{duration:1E3,easing:"easeInOutQuad"});else{var a=parseInt(b.squareSize,10);o.each(function(b,d){c(this).animate({top:parseInt(c(d).css("top"),10)-a/2+"px",left:parseInt(c(d).css("left"),10)-a/2+"px",width:a+"px",height:a+"px"},500)})}}}},B={width:"960px",height:"400px",squareSize:"80px",autoplay:!0,showControls:!0,showPause:!0,showPaginator:!0,showThumbnails:!0,showTimer:!0,removeSlidesWithBrokenImages:!0};
return this.each(function(){c(this);if(r[b])return r[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="object"||!b)return r.init.apply(this,[B,b]);else c.error("Method "+b+" does not exist on uBillboard")})}})(jQuery);