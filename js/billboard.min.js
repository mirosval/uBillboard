/*

 uBillboard - Premium Slide for WordPress

 Version: 3.0.3

 Copyright: uDesignStudios (Miroslav Zoricak, Jan Keselak) 2011

*/
(function(c){function y(b){try{console.log(b)}catch(c){}}c.extend(jQuery.easing,{easeInOutQuad:function(b,c,u,k,h){return(c/=h/2)<1?k/2*c*c+u:-k/2*(--c*(c-2)-1)+u}});c.fn.uBillboard=function(b){var g,u,k,h,m,z,w,l,x,i,r,n,o,s={init:function(a,d){g=c(this);u=c(".uds-bb-slides",g);b=c.extend(a,d);g.css("overflow","visible");g.add(u).css({width:b.width,height:b.height});r={};o=!1;f.initSlides();f.initAnimationMarkup();f.initPreloader();var e=f.preloadImages();f.initControls();c(".uds-bb-slides",g).live("click",
function(){var a=i[n];if(typeof a.link==="string"&&a.link!==""&&a.link!=="#")a.linkTarget==="_blank"?window.open(a.link,"_blank"):window.location=a.link;return!1});e===!1&&(g.trigger("udsBillboardLoadingDidComplete"),f.loadingCompleted());g.bind("udsBillboardTransitionDidComplete",function(){})},animateSlide:function(a){if(a!==n)if(i[a]===null)c.error("Slide ID "+a+" does not exist");else{g.trigger("udsBillboardSlideWillChange",n);var d=i[a];f.prepareForAnimation(a);(d.transition=="none"||d.bg=="")&&
k.css({backgroundColor:d.bgColor,backgroundImage:"none"});f.handleEmbeddedContent(d);var e="fade";if(d.transition!==null&&typeof d.transition==="string")e=d.transition;if(p[e]===null||typeof p[e]!=="object")c.error('Transition "'+e+'" is not defined');else{p[e].direction=d.direction;h.show().css("opacity",1);p[e].setup!==null&&typeof p[e].setup==="function"&&p[e].setup();p[e].perform!==null&&typeof p[e].perform==="function"&&p[e].perform();var j=1E3;if(p[e].duration!==null&&typeof p[e].duration===
"number")j=p[e].duration;clearTimeout(r.transitionComplete);r.transitionComplete=setTimeout(function(){var b="default";typeof d.link==="string"&&d.link!==""&&d.link!=="#"&&(b="pointer");k.stop().html(d.html).css({top:"0px",left:"0px",opacity:1,backgroundImage:"url("+d.bg+")",cursor:b});h.stop().hide();g.trigger("udsBillboardTransitionDidComplete",a)},j);n=a;g.trigger("udsBillboardSlideDidChange",n);b.pauseOnVideo&&i[n].transition=="none"||(o&&f.animateCountdown(i[n].delay),(b.autoplay||o)&&s.play())}}},
next:function(){var a=f.getNextSlideId();s.animateSlide(a)},prev:function(){var a=f.getPrevSlideId();s.animateSlide(a)},random:function(){var a=Math.floor(Math.random()*i.length+1);s.animateSlide(a)},play:function(){if(typeof n!=="number"||n===null)n=0;r!==null&&r.nextSlideAnimation!==null&&clearTimeout(r.nextSlideAnimation);typeof l!=="undefined"&&l!==null&&l.show();o||f.animateCountdown(i[n].delay);clearTimeout(r.nextSlideAnimation);r.nextSlideAnimation=setTimeout(function(){s.next()},i[n].delay);
o=!0;g.trigger("didChangePlayingState",{playing:o})},pause:function(){o=!1;g.trigger("didChangePlayingState",{playing:o});r.nextSlideAnimation!==null&&clearTimeout(r.nextSlideAnimation);typeof l!=="undefined"&&l!==null&&l.hide()},playpause:function(){o?s.pause():s.play()}},f={initSlides:function(){i=[];c(".uds-bb-slide",g).each(function(a,b){var e={delay:parseInt(c(".uds-delay",b).remove().text(),10),linkTarget:c(".uds-link-target",b).remove().text(),transition:c(".uds-transition",b).remove().text(),
direction:c(".uds-direction",b).remove().text(),bg:c(".uds-bb-bg-image",b).remove().attr("src"),bgColor:c(".uds-background",b).remove().text(),link:c(".uds-bb-link",b).remove().attr("href"),html:c(b).remove().html()};i.push(e)})},initPreloader:function(){g.append('<div class="uds-bb-preloader-wrapper"><div class="uds-bb-preloader"><div class="uds-bb-preloader-indicator"></div></div></div>');x=c(".uds-bb-preloader-wrapper",g);var a=c(".uds-bb-preloader-indicator",x);c(".uds-bb-preloader").css({top:parseInt(b.height,
10)/2-a.height()/2+"px",left:parseInt(b.width,10)/2-a.width()/2+"px"})},updatePreloader:function(a){var b=c(".uds-bb-preloader-indicator",x);b.stop().animate({left:"-"+Math.round((1-a)*b.width())+"px"},200);a>=1&&b.fadeOut("200",function(){x.remove()})},preloadImages:function(){for(var a=0,d=i.length,e=!1,j=0;j<d;j++)i[j].bg!==""&&(e=!0);if(!e)return f.updatePreloader(1),g.trigger("udsBillboardLoadingDidComplete"),f.loadingCompleted(),!1;for(j=0;j<d;j++)i[j].bg===""?++a:c("<img>").data("slideID",
j).load(function(){++a;f.updatePreloader(a/d);a==d&&(g.trigger("udsBillboardLoadingDidComplete"),f.loadingCompleted())}).error(function(){var e=c(this).data("slideID");y("Failed to load image: "+i[e].bg);++a;f.updatePreloader(a/d);a==d&&(g.trigger("udsBillboardLoadingDidComplete"),f.loadingCompleted());b.removeSlidesWithBrokenImages===!0&&i.splice(e,1)}).attr("src",i[j].bg);return!0},loadingCompleted:function(){n=0;var a=i[n],c=f.getSlideBackgroundCSS(a);k.css(c).html(a.html).fadeTo(300,1);f.handleEmbeddedContent(a);
w.delay(300).fadeTo(300,1);a=b.pauseOnVideo&&a.transition=="none";b.autoplay===!0&&!a?(f.animateCountdown(i[n].delay),s.play()):typeof l!=="undefined"&&l!==null&&l.hide()},initAnimationMarkup:function(){c(".uds-bb-slides",g).append("<div class='uds-stage'>").append("<div class='uds-next'>");k=c(".uds-stage",g);h=c(".uds-next",g);h.hide();c(k).add(h).css({width:b.width,height:b.height,opacity:0});for(var a=parseInt(b.width,10),d=parseInt(b.height,10),e=parseInt(b.squareSize,10),a=Math.ceil(a/e),d=
Math.ceil(d/e),e=0;e<d;e++)for(var j=0;j<a;j++)c("<div>",{"class":"uds-square uds-column-"+j+" uds-row-"+e+" uds-square-"+(j+a*e)}).data("position",{x:j,y:e}).append(c("<div>",{"class":"uds-square-inside"})).appendTo(h);f.resetAnimation();m=c(".uds-square",g);z=c(".uds-square-inside",g);w=c(".uds-bb-controls",g);f.createCountdown()},resetAnimation:function(){for(var a=parseInt(b.width,10),d=parseInt(b.height,10),e=parseInt(b.squareSize,10),j=Math.ceil(a/e),f=Math.ceil(d/e),i=0;i<f;i++)for(var q=0;q<
j;q++)c(".uds-square-"+(q+j*i),g).css({width:e,height:e,top:i*e,left:q*e,opacity:1}).stop(!0,!0).find(".uds-square-inside").css({width:a,height:d,top:-(i*e),left:-(q*e),opacity:1}).stop(!0,!0);k.css({opacity:1}).add(h).css({top:"0px",left:"0px"})},prepareForAnimation:function(a){var b=i[n],c=i[a];typeof b==="undefined"||b===null?y("Slide "+n+" does not exist! (Current Slide)"):typeof c==="undefined"||c===null?y("Slide "+a+" does not exist! (Next Slide)"):(a=f.getSlideBackgroundCSS(b),k.css(a).html(b.html),
f.resetAnimation(),c.transition!=="none"&&(a=f.getSlideBackgroundCSS(c),z.css(a).html(c.html)))},initControls:function(){w=c(".uds-bb-controls",g);w.show().css({width:b.width,height:b.height,opacity:0});var a=c(".uds-bb-playpause",g),d=c(".uds-bb-next",g),e=c(".uds-bb-prev",g),j=c(".uds-bb-paginator",g),f=c(".uds-bb-position-indicator-bullets",g),h=c(".uds-bb-thumbnails",g),q=c(".uds-bb-thumb",h);a.click(s.playpause);d.click(s.next);e.click(s.prev);a.addClass("play");g.bind("didChangePlayingState",
function(b,c){a.removeClass("play pause");c.playing?a.addClass("pause"):a.addClass("play")});c(".uds-bb-position-indicator",g).text("1/"+i.length);for(var l="",A=0;A<i.length;A++)l+="<div class='uds-bb-bullet'></div>";f.append(l).find("div:first").addClass("active");c("div",f).click(function(){s.animateSlide(c(this).index())});g.bind("udsBillboardSlideDidChange",function(){c(".uds-bb-position-indicator").text(n+1+"/"+i.length);c("div",f).removeClass("active").eq(n).addClass("active");q.css("background-color",
"").removeClass("active").eq(n).addClass("active").css("background-color",b.thumbnailHoverColor)});q.removeClass("active").eq(0).addClass("active");q.click(function(){s.animateSlide(c(this).index())});g.has(".uds-bb-thumbnails.top:not(.inside)").css("margin-top",h.outerHeight());g.has(".uds-bb-thumbnails.bottom:not(.inside)").css("margin-bottom",h.outerHeight());g.has(".uds-bb-thumbnails.left:not(.inside)").css("margin-left",h.outerWidth());g.has(".uds-bb-thumbnails.right:not(.inside)").css("margin-right",
h.outerWidth());q.each(function(a){var d=c("img",this);d.css({width:d.attr("width")+"px",height:d.attr("height")+"px"});i[a].bg===""&&i[a].transition!=="none"&&(d.replaceWith("<div>"),c("div",this).css({width:d.attr("width")+"px",height:d.attr("height")+"px",backgroundColor:i[a].bgColor}));c(this).is(".active")&&c(this).css("background-color",b.thumbnailHoverColor);var e=parseInt(b.thumbnailHoverColor.substr(1,2),16),j=parseInt(b.thumbnailHoverColor.substr(3,2),16),f=parseInt(b.thumbnailHoverColor.substr(5,
2),16);c(this).hover(function(){c(this).is(".active")?c(this).css("background-color",b.thumbnailHoverColor):c(this).css("background-color","rgb(237,237,237)").stop().animate({opacity:1},{duration:200,step:function(a,b){var c=((new Date).getTime()-b.startTime)/b.options.duration,d=255-Math.round((237-e)*c),g=255-Math.round((237-j)*c),c=255-Math.round((237-f)*c);b.elem.style.backgroundColor="rgb("+d+","+g+","+c+")"}})},function(){c(this).is(".active")?c(this).css("background-color",b.thumbnailHoverColor):
c(this).css("background-color",b.thumbnailHoverColor).stop().animate({opacity:1},{duration:200,step:function(a,b){var c=((new Date).getTime()-b.startTime)/b.options.duration,d=e+Math.round((237-e)*c),g=j+Math.round((237-j)*c),c=f+Math.round((237-f)*c);b.elem.style.backgroundColor="rgb("+d+","+g+","+c+")"}})})});var k,m,p,o=0,u=c(".uds-bb-thumbnail-container",h),v=h.is(".right,.left")?"vertical":"horizontal";v=="vertical"?(k=h.height(),l=(q.outerHeight(!0)-q.outerHeight())/2,m=q.length*q.outerHeight(!0)-
(q.length-1)*l,p="top",u.css("height",m+"px")):(k=h.width(),m=q.length*q.outerWidth(!0),p="left",u.css("width",m+"px"));k>m&&(o=k/2-m/2,u.css(p,o+"px"));h.bind({"mouseenter mousemove":function(a){clearInterval(r.thumbMove);r.thumbMove=setInterval(function(){var b=0,b=0,b=v=="vertical"?a.pageY-h.offset().top:a.pageX-h.offset().left;b-=k/2;b/=k/2;k>m||(b<0&&o>0?o--:b>0&&o<m-k&&o++,u.css(p,-o+"px"))},10)},mouseleave:function(){clearInterval(r.thumbMove)}});var t=c("");b.showControls==="hover"&&(t=t.add(d).add(e));
b.showPause==="hover"&&(t=t.add(a));b.showPaginator==="hover"&&(t=t.add(f).add(c(".uds-bb-position-indicator",g)));b.showThumbnails==="hover"&&(t=t.add(h));b.showPaginator!==!0&&b.showPause!==!0&&b.showControls!==!0&&(t=t.add(j));j=c(".uds-bb-position-indicator-bullets-container",g);if(j.length>0&&(b.showPause==="hover"||b.showPaginator==="hover"))t=t.add(j);t.fadeTo(0,0);g.hover(function(){t.stop().fadeTo(300,1)},function(){t.stop().fadeTo(300,0)});b.showControls===!1&&(d.hide(),e.hide());b.showPause===
!1&&a.hide();b.showPaginator===!1&&(f.hide(),c(".uds-bb-position-indicator",g).hide());b.showThumbnails===!1&&h.hide();c(">*",j).not(":hidden").length===0&&j.hide();c(".uds-center",g).each(function(){var a=c(this).outerWidth()/2,d=c(this).outerHeight()/2;c(this).css({top:parseInt(b.height,10)/2-d,left:parseInt(b.width,10)/2-a})});c(".uds-center-vertical",g).each(function(){var a=c(this).outerHeight()/2;c(this).css({top:parseInt(b.height,10)/2-a})});c(".uds-center-horizontal",g).each(function(){var a=
c(this).outerWidth()/2;c(this).css({left:parseInt(b.width,10)/2-a})})},getNextSlideId:function(){var a=n+1;return typeof i[a]==="undefined"?0:a},getPrevSlideId:function(){var a=n-1;return typeof i[a]==="undefined"?i.length-1:a},createCountdown:function(){if(b.showTimer!==!1)l=c('<div class="uds-bb-countdown"></div>').appendTo(w),canvas=l.append('<canvas width="100" height="100">').find("canvas").get(0),canvas.getContext?(ctx=canvas.getContext("2d"),ctx.lineWidth=3,ctx.strokeStyle="white",ctx.shadowOffsetX=
0,ctx.shadowOffsetY=0,ctx.shadowBlur=2,ctx.shadowColor="black",l.data("context",ctx)):(l.remove(),l=null)},animateCountdown:function(a){if(!(l===null||typeof l==="undefined"||b.showTimer===!1)){var c=l.data("context"),e=0;if(a!==!1){var j=(new Date).getTime();l.data("start",j);l.data("duration",a);clearInterval(r.countDown);r.countDown=setInterval(function(){f.animateCountdown(!1)},30)}else e=(new Date).getTime()-l.data("start"),a=l.data("duration");e/a>=1&&clearInterval(r.countDown);c.clearRect(0,
0,100,100);c.beginPath();c.arc(50,50,20,-Math.PI/2,-Math.PI/2+2*Math.PI*(e/a),!1);c.stroke()}},getSlideBackgroundCSS:function(a){return a.bg!==""?{backgroundColor:"transparent",backgroundImage:"url("+a.bg+")"}:{backgroundColor:a.bgColor,backgroundImage:""}},handleEmbeddedContent:function(a){a.transition=="none"&&(k.html(a.html),a=c(">*",k),a.css({position:"absolute",top:parseInt(b.height,10)/2-a.attr("height")/2,left:parseInt(b.width,10)/2-a.attr("width")/2,margin:"auto"}))},pos:function(a){return Math.abs(parseInt(a,
10))+"px"},neg:function(a){return"-"+Math.abs(parseInt(a,10))+"px"}},v={none:{delay:c.noop},left:{delay:function(){for(var a=Math.ceil(parseInt(b.width,10)/parseInt(b.squareSize,10)),d=0;d<a;d++)c(".uds-column-"+d,g).delay(d*(600/a))}},right:{delay:function(){for(var a=Math.ceil(parseInt(b.width,10)/parseInt(b.squareSize,10)),d=0;d<a;d++)c(".uds-column-"+d,g).delay(600-d*(600/a))}},top:{delay:function(){for(var a=Math.ceil(parseInt(b.height,10)/parseInt(b.squareSize,10)),d=0;d<a;d++)c(".uds-row-"+
d,g).delay(d*(600/a))}},bottom:{delay:function(){for(var a=Math.ceil(parseInt(b.height,10)/parseInt(b.squareSize,10)),d=0;d<a;d++)c(".uds-row-"+d,g).delay(600-d*(600/a))}},center:{delay:function(){for(var a=Math.ceil(parseInt(b.height,10)/parseInt(b.squareSize,10)),d=Math.ceil(parseInt(b.width,10)/parseInt(b.squareSize,10)),e=0;e<d;e++)for(var j=0;j<a;j++){var f=Math.sqrt(Math.pow(e-d/2+0.5,2)+Math.pow(j-a/2+0.5,2))/Math.sqrt(Math.pow(d/2,2)+Math.pow(a/2,2));c(".uds-square-"+(j*d+e)).delay(700*f)}}},
randomSquares:{delay:function(){m.each(function(){c(this).delay(Math.random()*700)})}},spiralIn:{delay:function(){for(var a=Math.ceil(parseInt(b.width,10)/parseInt(b.squareSize,10)),d=Math.ceil(parseInt(b.height,10)/parseInt(b.squareSize,10)),e=0,j=a-1,f=0,g=d-1,h=0,i=0,k=0;h<a*d;)c(".uds-square-"+(a*k+i)).delay(1E3*(h/(a*d))),k==f&&i<j?i++:i==j&&k<g?k++:k==g&&i>e?i--:(k--,k==f&&(i++,k++,e++,j--,f++,g--)),h++}},spiralOut:{delay:function(){for(var a=Math.ceil(parseInt(b.width,10)/parseInt(b.squareSize,
10)),d=Math.ceil(parseInt(b.height,10)/parseInt(b.squareSize,10)),e=0,j=a-1,f=0,g=d-1,i=0,h=0,k=0;i<a*d;)c(".uds-square-"+(a*k+h)).delay(1E3-1E3*(i/(a*d))),k==f&&h<j?h++:h==j&&k<g?k++:k==g&&h>e?h--:(k--,k==f&&(h++,k++,e++,j--,f++,g--)),i++}},chess:{delay:function(){for(var a=Math.ceil(parseInt(b.height,10)/parseInt(b.squareSize,10)),d=Math.ceil(parseInt(b.width,10)/parseInt(b.squareSize,10)),e=0;e<d;e++)for(var f=0;f<a;f++){var g=f%2==0&&e%2==0||f%2==1&&e%2==1?0:1;c(".uds-square-"+(f*d+e)).delay(200*
g)}}},zigzagHorizontal:{delay:function(){for(var a=Math.ceil(parseInt(b.height,10)/parseInt(b.squareSize,10)),d=Math.ceil(parseInt(b.width,10)/parseInt(b.squareSize,10)),e=0;e<d;e++)for(var f=0;f<a;f++){var g=(f*a+(f%2==0?e:d-e))/(a*a+d/2);c(".uds-square-"+(f*d+e)).delay(700*g)}}},zigzagVertical:{delay:function(){for(var a=Math.ceil(parseInt(b.height,10)/parseInt(b.squareSize,10)),d=Math.ceil(parseInt(b.width,10)/parseInt(b.squareSize,10)),e=0;e<d;e++)for(var f=0;f<a;f++){var g=(e*d+(e%2==0?f:a-f))/
(d*d+a/2);c(".uds-square-"+(f*d+e)).delay(700*g)}}}},p={none:{duration:0,direction:"",setup:function(){h.hide()},perform:c.noop()},fade:{duration:1E3,direction:"",setup:function(){m.css({opacity:0})},perform:function(){v[this.direction].delay();m.animate({opacity:1},{duration:500})}},crossFade:{duration:1E3,direction:"",setup:function(){m.css({opacity:0})},perform:function(){v[this.direction].delay();k.animate({opacity:0},{duration:1E3});m.animate({opacity:1},{duration:500})}},slide:{duration:700,
direction:"right",setup:function(){c(".uds-bb-slides",g).css({overflow:"hidden"});k.css({top:"0px",left:"0px"});if(this.direction==="left")h.show().css({top:"0px",left:f.neg(b.width)});else if(this.direction==="top")h.show().css({top:f.neg(b.height),left:"0px"});else if(this.direction==="bottom")h.show().css({top:f.pos(b.height),left:"0px"});else if(this.direction==="top")h.show().css({top:"0px",left:f.pos(b.width)});else if(this.direction==="zigzagHorizontal"){parseInt(b.squareSize,10);var a=parseInt(b.height,
10);m.each(function(){c(this).css({opacity:0,top:parseInt(c(this).css("top"),10)-a+"px"})});v[this.direction].delay()}else if(this.direction==="zigzagVertical"){parseInt(b.squareSize,10);var d=parseInt(b.width,10);m.each(function(){c(this).css({opacity:0,left:parseInt(c(this).css("left"),10)-d+"px"})});v[this.direction].delay()}else h.show().css({top:"0px",left:f.pos(b.width)})},perform:function(){var a={duration:700,easing:"easeInOutQuad"};if(this.direction==="left")k.animate({left:f.pos(b.width)},
a),h.animate({left:"0px"},a);else if(this.direction==="top")k.animate({top:f.pos(b.height)},a),h.animate({top:"0px"},a);else if(this.direction==="bottom")k.animate({top:f.neg(b.height)},a),h.animate({top:"0px"},a);else if(this.direction==="top")k.animate({left:f.neg(b.width)},a),h.animate({left:"0px"},a);else if(this.direction==="zigzagHorizontal"){parseInt(b.squareSize,10);var d=parseInt(b.height,10);m.each(function(){c(this).animate({opacity:1,top:parseInt(c(this).css("top"),10)+d+"px"},a)})}else if(this.direction===
"zigzagVertical"){parseInt(b.squareSize,10);var e=parseInt(b.width,10);m.each(function(){c(this).animate({opacity:1,left:parseInt(c(this).css("left"),10)+e+"px"},a)})}else k.animate({left:f.neg(b.width)},a),h.animate({left:"0px"},a)}},scale:{duration:1100,direction:"",setup:function(){var a,d;if(this.direction==="right")a=f.pos(parseInt(b.height,10)/2),d=f.pos(b.width);else if(this.direction==="left")a=f.pos(parseInt(b.height,10)/2),d="0px";else if(this.direction==="top")a="0px",d=f.pos(parseInt(b.width,
10)/2);else if(this.direction==="bottom")a=f.pos(b.height),d=f.pos(parseInt(b.width,10)/2);else if(this.direction==="center")a=f.pos(parseInt(b.height,10)/2),d=f.pos(parseInt(b.width,10)/2);else{if(this.direction==="zigzagHorizontal"){var e=parseInt(b.squareSize,10);m.each(function(){c(this).css({top:parseInt(c(this).css("top"),10)+e/2+"px",left:parseInt(c(this).css("left"),10)+e/2+"px",height:"0px"})})}else this.direction==="zigzagVertical"?(e=parseInt(b.squareSize,10),m.each(function(){c(this).css({top:parseInt(c(this).css("top"),
10)+e/2+"px",left:parseInt(c(this).css("left"),10)+e/2+"px",width:"0px"})})):(e=parseInt(b.squareSize,10),m.each(function(){c(this).css({top:parseInt(c(this).css("top"),10)+e/2+"px",left:parseInt(c(this).css("left"),10)+e/2+"px",width:"0px",height:"0px"})}));v[this.direction].delay();return}h.css({top:a,left:d,width:"1px",height:"1px"})},perform:function(){if(c.inArray(this.direction,["center","top","left","bottom","right"])>-1)h.animate({top:"0px",left:"0px",width:b.width,height:b.height},{duration:1E3,
easing:"easeInOutQuad"});else{var a=parseInt(b.squareSize,10);m.each(function(b,e){c(this).animate({top:parseInt(c(e).css("top"),10)-a/2+"px",left:parseInt(c(e).css("left"),10)-a/2+"px",width:a+"px",height:a+"px"},500)})}}}},B={width:"960px",height:"400px",squareSize:"80px",autoplay:!0,showControls:!0,showPause:!0,showPaginator:!0,showThumbnails:!0,showTimer:!0,removeSlidesWithBrokenImages:!0};return this.each(function(){c(this);if(s[b])return s[b].apply(this,Array.prototype.slice.call(arguments,
1));else if(typeof b==="object"||!b)return s.init.apply(this,[B,b]);else c.error("Method "+b+" does not exist on uBillboard")})}})(jQuery);