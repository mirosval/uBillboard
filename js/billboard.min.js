/*

 uBillboard - Premium Slide for WordPress

 Version: 3.5.1

 Copyright: uDesignStudios (Miroslav Zoricak, Jan Keselak) 2011

*/
(function(b){function B(b){try{console.log(b)}catch(g){}}b.extend(jQuery.easing,{easeInOutQuad:function(b,g,z,l,j){return(g/=j/2)<1?l/2*g*g+z:-l/2*(--g*(g-2)-1)+z},easeInOutCirc:function(b,g,z,l,j){return(g/=j/2)<1?-l/2*(Math.sqrt(1-g*g)-1)+z:l/2*(Math.sqrt(1-(g-=2)*g)+1)+z}});jQuery.fn.fastShow=function(){this.each(function(){this.style.display="block"});return this};jQuery.fn.fastHide=function(){this.each(function(){this.style.display="none"});return this};b.fn.uBillboard=function(f){var g,z,l,
j,r,x,A,m,C,k,s,q,t,D,i,n,o,v={init:function(a,c){function d(){g.add(x).add(l).add(j).css({width:"100%",height:"100%"});i=g.width();n=i*E;g.add(x).add(l).add(j).css({width:i+"px",height:n+"px"});var a=b(".uds-bb-preloader-indicator",g);b(".uds-bb-preloader",g).css({top:parseInt(n,10)/2-a.height()/2+"px",left:parseInt(i,10)/2-a.width()/2+"px"});b(".uds-center",g).each(function(){var a=b(this).outerWidth()/2,c=b(this).outerHeight()/2;b(this).css({top:n/2-c,left:i/2-a})});b(".uds-center-vertical",g).each(function(){var a=
b(this).outerHeight()/2;b(this).css({top:n/2-a})});b(".uds-center-horizontal",g).each(function(){var a=b(this).outerWidth()/2;b(this).css({left:i/2-a})});for(a=0;a<k.length;a++)if(k[a].hasVideo)for(var c=b(".uds-bb-slide-"+a+">*",g),d=0;d<c.length;d++){var e=c.eq(d),h=b(e).attr("width")/b(e).attr("height"),p=b(e).attr("width"),m=b(e).attr("height");b(e).attr("height")>n?(m=n,p=m*h):b(e).attr("width")>i&&(p=i,m=p/h);e.css({position:"absolute",top:n/2-m/2,left:i/2-p/2,width:p,height:m,margin:"auto"})}b(".uds-bb-slide>canvas").each(function(){b(this).css({width:i,
height:n}).attr({width:i,height:n})});b(".uds-bb-slide>.uds-bb-description").each(function(){var a=b(this),c=["top","bottom","height","right","left","width"],d=["font-size","margin-left","margin-top","margin-right","margin-bottom"],e={},h=n/parseInt(f.height,10),g=i/parseInt(f.width,10);typeof a.data("original-position")==="undefined"&&(a.data("original-position",!0),b.each(c,function(c,b){a.data(b,parseInt(a.css(b),10))}),b("h1,h2,h3,h4,h5,h6,p,div,span,ul,ol,li,a",a).each(function(){var a=b(this);
b.each(d,function(b,c){a.data(c,parseInt(a.css(c),10))})}));b.each(c,function(c,b){var d=c<3?h:g,f=a.data(b);e[b]=isNaN(f)?"auto":f*d});b("h1,h2,h3,h4,h5,h6,p,div,span,ul,ol,li,a",a).each(function(){var a=b(this);b.each(d,function(c,b){a.css(b,a.data(b)*g)})});a.css(e)})}g=b(this);z=b(".uds-bb-slides",g);f=b.extend(a,c);g.css("overflow","visible");g.add(z).css({maxWidth:f.width,maxHeight:f.height});s={};D=t=!1;var e=h.preloadRequired();h.initSlides();h.initAnimationMarkup();var p=e;e&&(h.initPreloader(),
p=h.preloadImages());h.initControls();b(".uds-bb-slides",g).live("click",function(){var a=k[q];if(typeof a.link==="string"&&a.link!==""&&a.link!=="#")a.linkTarget==="_blank"?window.open(a.link,"_blank"):window.location.href=a.link});h.initTouchSupport();p===!1&&(g.trigger("udsBillboardLoadingDidComplete"),h.loadingCompleted());var E=parseInt(f.height,10)/parseInt(f.width,10);d();h.isMobile()?b(window).bind("orientationchange",d):b(window).resize(d)},animateSlide:function(a,c){if(a!==q)if(typeof c!==
"boolean"&&(c=!0),k[a]===null)b.error("Slide ID "+a+" does not exist");else{g.trigger("udsBillboardSlideWillChange",q);var d=k[a];k[q].hasVideo&&h.pauseVideo(k[q]);h.prepareForAnimation(a);h.handleEmbeddedContent(d);var e=0;if(c){var p="fade";if(d.transition!==null&&typeof d.transition==="string")p=d.transition;if(u[p]===null||typeof u[p]!=="object")B('Transition "'+p+'" is not defined'),p="fade";e=u[p].direction;u[p].direction=y[d.direction]===null||typeof y[d.direction]!=="object"?y[e]===null||
typeof y[e]!=="object"?"right":e:d.direction;j.fastShow().css("opacity",1);D=!0;u[p].setup!==null&&typeof u[p].setup==="function"&&u[p].setup(q,a);u[p].perform!==null&&typeof u[p].perform==="function"&&u[p].perform(q,a);e=1E3;if(u[p].duration!==null&&typeof u[p].duration==="number")e=u[p].duration}clearTimeout(s.transitionComplete);s.transitionComplete=setTimeout(function(){var c="default";typeof d.link==="string"&&d.link!==""&&d.link!=="#"&&(c="pointer");l.stop().css({"-webkit-transition":"-webkit-transform 0s",
"-webkit-transform":"translate3d(0px,0px,0px)",top:"0px",left:"0px",opacity:1,cursor:c});j.css({"-webkit-transition":"all 0s","-webkit-transform":"translate3d(0px,0px,0px)"});h.forceReflow();b(".uds-bb-slide",l).fastHide();b(".uds-bb-slide-"+d.id,l).fastShow();b(".uds-bb-description",l).fastShow();j.stop().fastHide();D=!1;d.autoplayVideo&&f.pauseOnVideo&&h.playVideo(d);d.kenBurns&&h.kenBurns(d);g.trigger("udsBillboardTransitionDidComplete",a)},e);q=a;g.trigger("udsBillboardSlideDidChange",q);f.pauseOnVideo&&
k[q].hasVideo?(m!==null&&typeof m!=="undefined"&&m.fastHide(),clearTimeout(s.nextSlideAnimation)):(d.stop&&(t=!1),t?h.animateCountdown(k[q].delay):m!==null&&typeof m!=="undefined"&&m.fastHide(),f.autoplay&&t&&!d.stop&&v.play())}},next:function(){var a=h.getNextSlideId();v.animateSlide(a)},prev:function(){var a=h.getPrevSlideId();v.animateSlide(a)},random:function(){v.animateSlide(Math.floor(Math.random()*k.length+1))},play:function(){if(typeof q!=="number"||q===null)q=0;s!==null&&s.nextSlideAnimation!==
null&&clearTimeout(s.nextSlideAnimation);typeof m!=="undefined"&&m!==null&&m.fastShow();t||h.animateCountdown(k[q].delay);clearTimeout(s.nextSlideAnimation);s.nextSlideAnimation=setTimeout(function(){v.next()},k[q].delay);t=!0;g.trigger("didChangePlayingState",{playing:t})},pause:function(){t=!1;g.trigger("didChangePlayingState",{playing:t});s.nextSlideAnimation!==null&&clearTimeout(s.nextSlideAnimation);typeof m!=="undefined"&&m!==null&&m.fastHide()},playpause:function(){t?v.pause():v.play()}},h=
{initSlides:function(){var a={delay:5E3,hasVideo:!1,linkTarget:"",transition:"fade",direction:"",bg:"",bgColor:"transparent",repeat:"no-repeat",link:"",stop:!1,autoplayVideo:!0,kenBurns:!1,kenBurnsSpeed:4E3,html:""};k=[];b(".uds-bb-slide",g).each(function(c,d){var e=h.maybeUseRetina(b(".uds-bb-bg-image",d).remove().attr("src"),f.slides[c]),e=b.extend({},a,f.slides[c],{id:c,bg:e,link:b(".uds-bb-link",d).remove().attr("href"),html:b(d).remove().html()}),g=b("<div class='uds-bb-slide-"+c+" uds-bb-slide'>");
g.css({display:"none",maxWidth:f.width,maxHeight:f.height,width:"100%",height:"100%"}).css(h.getSlideBackgroundCSS(e)).html(e.html);e.cache=g;k.push(e)})},preloadRequired:function(){var a=!0;b(".uds-bb-bg-image",g).each(function(){var c=b(this).get(0);a=a&&c.complete});return!a},initPreloader:function(){g.append('<div class="uds-bb-preloader-wrapper"><div class="uds-bb-preloader"><div class="uds-bb-preloader-indicator"></div></div></div>');C=b(".uds-bb-preloader-wrapper",g);var a=b(".uds-bb-preloader-indicator",
C);b(".uds-bb-preloader",g).css({top:parseInt(n,10)/2-a.height()/2+"px",left:parseInt(i,10)/2-a.width()/2+"px"})},updatePreloader:function(a){var c=b(".uds-bb-preloader-indicator",C);c.stop().animate({left:"-"+Math.round((1-a)*c.width())+"px"},200);a>=1&&c.fadeOut("200",function(){C.remove()})},preloadImages:function(){for(var a=0,c=k.length,d=!1,e=0;e<c;e++)k[e].bg!==""&&(d=!0);if(!d)return h.updatePreloader(1),g.trigger("udsBillboardLoadingDidComplete"),h.loadingCompleted(),!1;for(e=0;e<c;e++)k[e].bg===
""?++a:b("<img>").data("slideID",e).load(function(){++a;h.updatePreloader(a/c);a===c&&(g.trigger("udsBillboardLoadingDidComplete"),h.loadingCompleted())}).error(function(){var d=b(this).data("slideID");B("Failed to load image: "+k[d].bg);++a;h.updatePreloader(a/c);a===c&&(g.trigger("udsBillboardLoadingDidComplete"),h.loadingCompleted());f.removeSlidesWithBrokenImages===!0&&k.splice(d,1)}).attr("src",k[e].bg);return!0},loadingCompleted:function(){q=0;var a=k[q];h.getSlideBackgroundCSS(a);b(".uds-bb-slide-0",
l).fastShow().fadeTo(300,1);b(".uds-bb-description",l).fastShow();h.handleEmbeddedContent(a);A.delay(300).fadeTo(300,1);a.kenBurns&&(h.prepareKenBurns(a),h.kenBurns(a));var c=f.pauseOnVideo&&a.hasVideo;f.autoplay===!0?c?a.autoplayVideo&&h.playVideo(a):(h.animateCountdown(k[q].delay),v.play()):typeof m!=="undefined"&&m!==null&&m.fastHide()},initAnimationMarkup:function(){b(".uds-bb-slides",g).append("<div class='uds-stage'>").append("<div class='uds-next'>");l=b(".uds-stage",g);j=b(".uds-next",g);
j.fastHide();b(l).add(j).css({maxWidth:f.width,maxHeight:f.height,width:"100%",height:"100%",opacity:0});if(!h.isSlowBrowser())for(var a=parseInt(f.width,10),c=parseInt(f.height,10),d=parseInt(f.squareSize,10),a=Math.ceil(a/d),c=Math.ceil(c/d),d=0;d<c;d++)for(var e=0;e<a;e++)b("<div>",{"class":"uds-square uds-column-"+e+" uds-row-"+d+" uds-square-"+(e+a*d)}).data("position",{x:e,y:d}).append(b("<div>",{"class":"uds-square-inside"})).appendTo(j);h.resetAnimation();r=b(".uds-square",g);x=b(".uds-square-inside",
g);A=b(".uds-bb-controls",g);for(a=0;a<k.length;a++)c=k[a],l.append(c.cache.clone()),c.hasVideo||x.append(c.cache.clone());b(">div",l).add(">div",x).fastHide();h.createCountdown()},resetAnimation:function(){for(var a=parseInt(f.width,10),c=parseInt(f.height,10),d=parseInt(f.squareSize,10),e=Math.ceil(a/d),h=Math.ceil(c/d),i=0;i<h;i++)for(var k=0;k<e;k++)b(".uds-square-"+(k+e*i),g).css({width:d,height:d,top:i*d,left:k*d,opacity:1}).stop(!0,!0).find(".uds-square-inside").css({width:a,height:c,top:-(i*
d),left:-(k*d),opacity:1}).stop(!0,!0);l.css({opacity:1}).add(j).css({top:"0px",left:"0px"})},prepareForAnimation:function(a){var c=k[q],d=k[a];typeof c==="undefined"||c===null?B("Slide "+q+" does not exist! (Current Slide)"):typeof d==="undefined"||d===null?B("Slide "+a+" does not exist! (Next Slide)"):(b(".uds-bb-slide",l).fastHide(),b(".uds-bb-slide-"+c.id,l).fastShow(),b(".uds-bb-description",l).fastShow(),h.resetAnimation(),clearInterval(s.kenBurnsCanvasTimer),d.kenBurns&&h.prepareKenBurns(d),
d.hasVideo||h.isSlowBrowser()?(b(".uds-bb-square",j).length>0&&r.detach(),b(">.uds-bb-slide",j).remove(),j.append(b(">.uds-bb-slide-"+d.id,l).clone().css("display","block"))):(b(".uds-bb-square",j).length===0&&(b(">.uds-bb-slide",j).remove(),j.append(r)),b(".uds-bb-slide",x).fastHide(),b(".uds-bb-slide-"+d.id,x).fastShow(),b(".uds-bb-description",x).fastShow(),b(".uds-bb-slide-"+d.id,x).css({width:i+"px",height:n+"px"})))},initControls:function(){A=b(".uds-bb-controls",g);A.fastShow().css({maxWidth:f.width,
maxHeight:f.height,width:"100%",height:"100%",opacity:0});b.browser.msie&&b.browser.version<8&&b(".uds-bb-paginator").css("position","static");var a=b(".uds-bb-playpause",g),c=b(".uds-bb-next",g),d=b(".uds-bb-prev",g),e=b(".uds-bb-paginator",g),p=b(".uds-bb-position-indicator-bullets",g),i=b(".uds-bb-thumbnails",g),j=b(".uds-bb-thumb",i),l=b(".uds-bb-thumbnail-container",i);a.click(v.playpause);c.click(v.next);d.click(v.prev);a.addClass("play");g.bind("didChangePlayingState",function(c,b){a.removeClass("play pause");
b.playing?a.addClass("pause"):a.addClass("play")});b(".uds-bb-position-indicator",g).text("1/"+k.length);for(var m="",n=0;n<k.length;n++)m+="<div class='uds-bb-bullet'></div>";p.append(m).find("div:first").addClass("active");b("div",p).click(function(){v.animateSlide(b(this).index())});g.bind("udsBillboardSlideDidChange",function(){b(".uds-bb-position-indicator").text(q+1+"/"+k.length);b("div",p).removeClass("active").eq(q).addClass("active");j.css("background-color","").removeClass("active").eq(q).addClass("active").css("background-color",
f.thumbnailHoverColor)});j.removeClass("active").eq(0).addClass("active");j.click(function(){v.animateSlide(b(this).index())});i.is(".top,.bottom")&&l.css("width","10000px");j.each(function(a){var c=b("img",this);c.css({width:c.attr("width")+"px",height:c.attr("height")+"px"});b(this).css({width:c.attr("width")+"px",height:c.attr("height")+"px"});h.shouldUseRetina()&&c.attr("src",c.attr("src").replace("-thumb.","-thumb-retina."));k[a].bg===""&&!k[a].hasVideo&&(c.replaceWith("<div>"),b("div",this).css({width:c.attr("width")+
"px",height:c.attr("height")+"px",backgroundColor:k[a].bgColor}));var d=b(this).css("background-color"),e="";d.indexOf("rgb(")>-1?(a=d.match(/rgb\(([0-9]{1,3}), ([0-9]{1,3}), ([0-9]{1,3})/),e={r:parseInt(a[1],10),g:parseInt(a[2],10),b:parseInt(a[3],10)}):e={r:parseInt(d.substr(1,2),16),g:parseInt(d.substr(3,2),16),b:parseInt(d.substr(5,2),16)};b(this).is(".active")&&b(this).css("background-color",f.thumbnailHoverColor);var g={r:parseInt(f.thumbnailHoverColor.substr(1,2),16),g:parseInt(f.thumbnailHoverColor.substr(3,
2),16),b:parseInt(f.thumbnailHoverColor.substr(5,2),16)};b(this).hover(function(){b(this).is(".active")?b(this).css("background-color",f.thumbnailHoverColor):b(this).css("background-color",d).stop().animate({opacity:1},{duration:200,step:function(a,c){var b=((new Date).getTime()-c.startTime)/c.options.duration;c.elem.style.backgroundColor="rgb("+Math.round(e.r*(1-b)+g.r*b)+","+Math.round(e.g*(1-b)+g.g*b)+","+Math.round(e.b*(1-b)+g.b*b)+")"}})},function(){b(this).is(".active")?b(this).css("background-color",
f.thumbnailHoverColor):b(this).css("background-color",f.thumbnailHoverColor).stop().animate({opacity:1},{duration:200,step:function(a,c){var b=((new Date).getTime()-c.startTime)/c.options.duration;c.elem.style.backgroundColor="rgb("+Math.round(e.r*b+g.r*(1-b))+","+Math.round(e.g*b+g.g*(1-b))+","+Math.round(e.b*b+g.b*(1-b))+")"}})})});g.has(".uds-bb-thumbnails.top:not(.inside)").css("margin-top",i.outerHeight());g.has(".uds-bb-thumbnails.bottom:not(.inside)").css("margin-bottom",i.outerHeight());g.has(".uds-bb-thumbnails.left:not(.inside)").css("margin-left",
i.outerWidth());g.has(".uds-bb-thumbnails.right:not(.inside)").css("margin-right",i.outerWidth());b("<div class='uds-thumbnails-shadow-left'>").appendTo(i);b("<div class='uds-thumbnails-shadow-right'>").appendTo(i);var o,r,u,t=0,x=i.is(".right,.left")?"vertical":"horizontal";x==="vertical"?(o=i.height(),m=(j.outerHeight(!0)-j.outerHeight())/2,r=j.length*j.outerHeight(!0)-(j.length-1)*m,u="top",l.css("height",r+"px")):(o=i.width(),m=j.outerWidth(!0),m===0&&(m=parseInt(b("img",j).attr("width"),10)+
18),r=j.length*m,u="left",l.css("width",r+"px"));o>r&&(t=o/2-r/2,l.css(u,t+"px"));var y=function(a){o=x==="vertical"?i.height():i.width();o>r&&(t=o/2-r/2);var c=0,b=0;a!==null&&typeof a!=="undefined"&&(c=x==="vertical"?a.pageY-i.offset().top:a.pageX-i.offset().left);b=c-o/2;b=b/(o/2)*5;if(b<0&&t>0||b>0&&t<r-o)t+=b;if((a===null||typeof a==="undefined")&&o>r)t=-(o/2-r/2);else if(o>r)return;l.css(u,-t+"px")};h.isMobile()?i.css("overflow","scroll"):i.bind({"mouseenter mousemove":function(a){clearInterval(s.thumbMove);
s.thumbMove=setInterval(function(){y(a)},10)},mouseleave:function(){clearInterval(s.thumbMove)}});b(window).resize(function(){i.length!==0&&(clearInterval(s.thumbMove),y())});var w=b("");f.showControls==="hover"&&(w=w.add(c).add(d));f.showPause==="hover"&&(w=w.add(a));f.showPaginator==="hover"&&(w=w.add(p).add(b(".uds-bb-position-indicator",g)));f.showThumbnails==="hover"&&(w=w.add(i));f.showPaginator!==!0&&f.showPause!==!0&&f.showControls!==!0&&(w=w.add(e));e=b(".uds-bb-position-indicator-bullets-container",
g);if(e.length>0&&(f.showPause==="hover"||f.showPaginator==="hover"))w=w.add(e);w.fadeTo(0,0);g.hover(function(){w.stop().fadeTo(300,1)},function(){w.stop().fadeTo(300,0)});f.showControls===!1&&(c.fastHide(),d.fastHide());f.showPause===!1&&a.fastHide();f.showPaginator===!1&&(p.fastHide(),b(".uds-bb-position-indicator",g).fastHide());f.showThumbnails===!1&&i.fastHide();b(">*",e).not(":hidden").length===0&&e.fastHide()},initTouchSupport:function(){b(".uds-bb-slides",g).on("touchstart touchmove touchend touchcancel",
function(a){if(!D){var c=a.originalEvent;c.type==="touchstart"&&(o={startX:c.touches[0].clientX,time:(new Date).getTime(),absoluteStartTime:(new Date).getTime()},b(".uds-bb-slides",g).css("overflow","hidden"),clearTimeout(s.nextSlideAnimation),typeof m==="object"&&m.fastHide(),l.add(j).css("-webkit-transition","none"),h.forceReflow(),l.stop().css({left:0,"-webkit-transform":"translate3d(0px,0px,0px)"}),j.stop().css({left:i,"-webkit-transform":"translate3d(0px,0px,0px)"}),h.forceReflow());if(c.type===
"touchmove"){var d=c.touches[0].clientX-o.startX,e=c.touches[0].clientX-o.currentX;o.currentX=c.touches[0].clientX;var f=(new Date).getTime(),n=f-o.time;o.time=f;o.speed=e/(n/1E3);(e=(new Date).getTime()-o.absoluteStartTime<150)||a.preventDefault();d>0?(o.direction=-1,e=h.getPrevSlideId()):(o.direction=1,e=h.getNextSlideId());o.slideId=e;k[q].hasVideo&&h.pauseVideo(k[q]);h.prepareForAnimation(e);h.handleEmbeddedContent(k[q]);l.add(j).css("-webkit-transition","none");h.forceReflow();l.css("-webkit-transform",
"translate3d("+d+"px,0px,0px)");o.left=d>0?-i+d:i+d;j.fastShow().css({"-webkit-transform":"translate3d("+o.left+"px,0px,0px)",opacity:1});h.forceReflow()}if(c.type==="touchend"||c.type==="touchcancel")c=Math.abs(o.left)<i/2,d=Math.abs(o.speed)>100,e=(new Date).getTime()-o.absoluteStartTime<150,l.add(j).css({left:0,"-webkit-transition":"-webkit-transform 300ms linear"}),h.forceReflow(),(c||d)&&!e?(l.css({"-webkit-transform":"translate3d("+-o.direction*i+"px,0px,0px)"}),j.fastShow().css({"-webkit-transform":"translate3d(0px,0px,0px)"}),
h.forceReflow(),l.one("webkitTransitionEnd",function(){v.animateSlide(o.slideId,!1)}),a.preventDefault()):(l.css({"-webkit-transform":"translate3d(0px,0px,0px)"}),j.fastShow().css({"-webkit-transform":"translate3d("+o.direction*i+"px,0px,0px)"}),h.forceReflow(),e||a.preventDefault())}})},forceReflow:function(){j.add(l).css("offsetTop")},getNextSlideId:function(){var a=q+1;return typeof k[a]==="undefined"?0:a},getPrevSlideId:function(){var a=q-1;return typeof k[a]==="undefined"?k.length-1:a},createCountdown:function(){if(f.showTimer!==
!1){var a=100,c=a,d=null,d=null;window.devicePixelRatio&&(a=c*window.devicePixelRatio);m=b('<div class="uds-bb-countdown"></div>').appendTo(A);d=m.append('<canvas width="'+a+'" height="'+a+'">').find("canvas").get(0);b("canvas",m).css({width:c+"px",height:c+"px"});d&&typeof d.getContext==="function"?(d=d.getContext("2d"),d.lineWidth=3,d.strokeStyle="white",d.shadowOffsetX=0,d.shadowOffsetY=0,d.shadowBlur=2,d.shadowColor="black",m.data("context",d)):(m.remove(),m=null)}},animateCountdown:function(a){if(!(m===
null||typeof m==="undefined"||f.showTimer===!1)){var c=m.data("context"),b=0,e=100;if(typeof c==="undefined")clearInterval(s.countDown);else{if(a!==!1){var g=(new Date).getTime();m.data("start",g);m.data("duration",a);clearInterval(s.countDown);s.countDown=setInterval(function(){h.animateCountdown(!1)},30)}else b=(new Date).getTime()-m.data("start"),a=m.data("duration");b/a>=1&&clearInterval(s.countDown);window.devicePixelRatio&&(e=100*window.devicePixelRatio);c.clearRect(0,0,e,e);c.beginPath();c.arc(e/
2,e/2,e/5,-Math.PI/2,-Math.PI/2+2*Math.PI*(b/a),!1);c.lineWidth=3*e/100;c.stroke()}}},getSlideBackgroundCSS:function(a){return a.bg!==""?{backgroundColor:a.bgColor,backgroundImage:"url("+a.bg+")",backgroundRepeat:a.repeat}:{backgroundColor:a.bgColor,backgroundImage:"",backgroundRepeat:a.repeat}},handleEmbeddedContent:function(a){if(a.hasVideo&&a.embeddecContentHandled!==!0){var c=b(">.uds-bb-slide-"+a.id+">*",l);c.is("object")&&(c.prepend("<param name='wmode' value='opaque' />"),b("embed",c).attr("wmode",
"opaque"));c.css({position:"absolute",top:parseInt(f.height,10)/2-c.attr("height")/2,left:parseInt(f.width,10)/2-c.attr("width")/2,margin:"auto"});a.embeddecContentHandled=!0}},playVideo:function(a){if(!(typeof window.postMessage!=="function"||typeof JSON==="undefined"))for(var a=b(".uds-stage .uds-bb-slide-"+a.id,g),a=b("iframe",a),c=0;c<b("iframe").length;c++)b("iframe").eq(c).get(0)===a.get(0)&&(window.frames[c].postMessage(JSON.stringify({event:"command",func:"playVideo",args:null,id:a.attr("id")}),
"*"),window.frames[c].postMessage(JSON.stringify({method:"play"}),"*"),b(window).on("message",function(a){a=a.originalEvent;a.origin==="http://www.youtube.com"&&(a=JSON.parse(a.data),a.event==="onStateChange"&&a.info.playerState===0&&v.play())}))},pauseVideo:function(a){if(!(typeof window.postMessage!=="function"||typeof JSON==="undefined"))for(var a=b(".uds-stage .uds-bb-slide-"+a.id,g),a=b("iframe",a),c=0;c<b("iframe").length;c++)b("iframe").eq(c).get(0)===a.get(0)&&(window.frames[c].postMessage(JSON.stringify({event:"command",
func:"pauseVideo",args:null,id:a.attr("id")}),"*"),window.frames[c].postMessage(JSON.stringify({method:"pause"}),"*"))},prepareKenBurns:function(a){if(!a.hasVideo){if(typeof a.kenBurnsImageCache==="undefined"){var c=b(".uds-bb-slide-"+a.id,g),d=new Image;a.kenBurnsImage=d;var e=b("<canvas>").css({position:"relative",width:i||f.width,height:n||f.height}).attr({width:i||f.width,height:n||f.height}).appendTo(c).get(0);if(typeof e.getContext==="function"){var h=e.getContext("2d");a.kenBurnsCanvasCache=
h;a.kenBurnsImageCache=!1;d.onLoad=function(){h.clearRect(0,0,i,n);h.drawImage(d,0,0)};d.src=a.bg.replace("-full.","-ken.")}else b(e).remove(),a.kenBurnsCanvasCache=!1,d.src=a.bg.replace("-full.","-ken."),b(d).addClass("uds-ken-burns"),c.css({overflow:"hidden"}).append(d),a.kenBurnsImageCache=b(".uds-bb-slide-"+a.id+" img.uds-ken-burns",g),a.kenBurnsImageCache.css({position:"relative",display:"block","-ms-interpolation-mode":"bicubic"})}a.kenBurnsCanvasCache?a.kenBurnsCanvasStartingCSS={top:0,left:0,
width:i,height:n}:a.kenBurnsImageCache.css({top:0,left:0,width:i,height:n})}},kenBurns:function(a){if(!(a.hasVideo||typeof a.kenBurnsImageCache==="undefined"&&typeof a.kenBurnsCanvasCache==="undefined"))if(a.kenBurnsCanvasCache){clearInterval(s.kenBurnsCanvasTimer);var b=new Date,d=h.kenBurnsCSS(!1);s.kenBurnsCanvasTimer=setInterval(function(){var e=((new Date).getTime()-b.getTime())/a.kenBurnsSpeed,f=a.kenBurnsCanvasStartingCSS;a.kenBurnsCanvasCache.clearRect(0,0,i,n);a.kenBurnsCanvasCache.drawImage(a.kenBurnsImage,
(1-e)*f.left+e*d.left,(1-e)*f.top+e*d.top,(1-e)*f.width+e*d.width,(1-e)*f.height+e*d.height);if(e>=1)b=new Date,a.kenBurnsCanvasStartingCSS=d,d=h.kenBurnsCSS(!1)},20)}else a.kenBurnsImageCache.eq(0).stop().animate(h.kenBurnsCSS(!0),{duration:a.kenBurnsSpeed,easing:"easeInOutQuad",complete:function(){a.id===q&&h.kenBurns(a)}})},kenBurnsCSS:function(a){var b=1.2-Math.random()*0.4,b={top:(-0.2+Math.random()*0.4)*n,left:(-0.2+Math.random()*0.4)*i,width:i*b,height:n*b},d=parseInt(f.height,10)/parseInt(f.width,
10);if(b.top>0)b.top=0;if(b.left>0)b.left=0;if(b.top+b.height<n)b.height=-b.top+n,b.width=b.height/d;if(b.left+b.width<i)b.width=-b.left+i,b.height=b.width*d;a&&(b.top+="px",b.left+="px",b.width+="px",b.height+="px");return b},isSlowBrowser:function(){return h.isMobile()},isMobile:function(){var a=navigator.userAgent,a={ios:b.isArray(a.match(/(iPhone|iPod|iPad)/)),blackberry:b.isArray(a.match(/BlackBerry/)),android:b.isArray(a.match(/Android/))};return a.ios||a.blackberry||a.android?!0:!1},shouldUseRetina:function(){return typeof window.devicePixelRatio===
"number"?window.devicePixelRatio>1:!1},maybeUseRetina:function(a,b){var d=typeof b.retina!=="undefined"?b.retina:!1;return h.shouldUseRetina()&&d?a.replace("-full.","-full-retina."):a},pos:function(a){return Math.abs(parseInt(a,10))+"px"},neg:function(a){return"-"+Math.abs(parseInt(a,10))+"px"}},y={none:{delay:b.noop},intuitive:{delay:b.noop},intuitiveVertical:{delay:b.noop},left:{delay:function(){for(var a=Math.ceil(parseInt(f.width,10)/parseInt(f.squareSize,10)),c=0;c<a;c++)b(".uds-column-"+c,g).delay(c*
(600/a))}},right:{delay:function(){for(var a=Math.ceil(parseInt(f.width,10)/parseInt(f.squareSize,10)),c=0;c<a;c++)b(".uds-column-"+c,g).delay(600-c*(600/a))}},top:{delay:function(){for(var a=Math.ceil(parseInt(f.height,10)/parseInt(f.squareSize,10)),c=0;c<a;c++)b(".uds-row-"+c,g).delay(c*(600/a))}},bottom:{delay:function(){for(var a=Math.ceil(parseInt(f.height,10)/parseInt(f.squareSize,10)),c=0;c<a;c++)b(".uds-row-"+c,g).delay(600-c*(600/a))}},center:{delay:function(){for(var a=Math.ceil(parseInt(f.height,
10)/parseInt(f.squareSize,10)),c=Math.ceil(parseInt(f.width,10)/parseInt(f.squareSize,10)),d=0;d<c;d++)for(var e=0;e<a;e++){var g=Math.sqrt(Math.pow(d-c/2+0.5,2)+Math.pow(e-a/2+0.5,2))/Math.sqrt(Math.pow(c/2,2)+Math.pow(a/2,2));b(".uds-square-"+(e*c+d)).delay(700*g)}}},randomSquares:{delay:function(){r.each(function(){b(this).delay(Math.random()*700)})}},spiralIn:{delay:function(){for(var a=Math.ceil(parseInt(f.width,10)/parseInt(f.squareSize,10)),c=Math.ceil(parseInt(f.height,10)/parseInt(f.squareSize,
10)),d=0,e=a-1,g=0,h=c-1,i=0,j=0,k=0;i<a*c;)b(".uds-square-"+(a*k+j)).delay(1E3*(i/(a*c))),k===g&&j<e?j++:j===e&&k<h?k++:k===h&&j>d?j--:(k--,k===g&&(j++,k++,d++,e--,g++,h--)),i++}},spiralOut:{delay:function(){for(var a=Math.ceil(parseInt(f.width,10)/parseInt(f.squareSize,10)),c=Math.ceil(parseInt(f.height,10)/parseInt(f.squareSize,10)),d=0,e=a-1,g=0,h=c-1,i=0,j=0,k=0;i<a*c;)b(".uds-square-"+(a*k+j)).delay(1E3-1E3*(i/(a*c))),k===g&&j<e?j++:j===e&&k<h?k++:k===h&&j>d?j--:(k--,k===g&&(j++,k++,d++,e--,
g++,h--)),i++}},chess:{delay:function(){for(var a=Math.ceil(parseInt(f.height,10)/parseInt(f.squareSize,10)),c=Math.ceil(parseInt(f.width,10)/parseInt(f.squareSize,10)),d=0;d<c;d++)for(var e=0;e<a;e++){var g=e%2===0&&d%2===0||e%2===1&&d%2===1?0:1;b(".uds-square-"+(e*c+d)).delay(200*g)}}},zigzagHorizontal:{delay:function(){for(var a=Math.ceil(parseInt(f.height,10)/parseInt(f.squareSize,10)),c=Math.ceil(parseInt(f.width,10)/parseInt(f.squareSize,10)),d=0;d<c;d++)for(var e=0;e<a;e++){var g=(e*a+(e%2===
0?d:c-d))/(a*a+c/2);b(".uds-square-"+(e*c+d)).delay(700*g)}}},zigzagVertical:{delay:function(){for(var a=Math.ceil(parseInt(f.height,10)/parseInt(f.squareSize,10)),c=Math.ceil(parseInt(f.width,10)/parseInt(f.squareSize,10)),d=0;d<c;d++)for(var e=0;e<a;e++){var g=(d*c+(d%2===0?e:a-e))/(c*c+a/2);b(".uds-square-"+(e*c+d)).delay(700*g)}}}},u={none:{duration:0,direction:"",setup:function(){j.fastHide()},perform:b.noop()},fade:{duration:1500,direction:"",setup:function(){(h.isSlowBrowser()?j:r).css({opacity:0})},
perform:function(){var a=h.isSlowBrowser()?j:r;y[this.direction].delay();a.animate({opacity:1},{duration:500})}},crossFade:{duration:1E3,direction:"",setup:function(){r.css({opacity:0})},perform:function(){y[this.direction].delay();l.animate({opacity:0},{duration:1E3});(h.isSlowBrowser()?j:r).animate({opacity:1},{duration:500})}},slide:{duration:700,direction:"right",setup:function(a,c){b(".uds-bb-slides",g).css({overflow:"hidden"});l.css({top:"0px",left:"0px"});var d=this.direction;if(d==="intuitive"||
d==="intuitiveVertical")d=(a<c||c===0&&a===k.length-1)&&!(c===k.length-1&&a===0)?d==="intuitive"?"right":"top":d==="intuitive"?"left":"bottom";d==="left"?j.fastShow().css({top:"0px",left:h.neg(i)}):d==="top"?j.fastShow().css({top:h.neg(n),left:"0px"}):d==="bottom"?j.fastShow().css({top:h.pos(n),left:"0px"}):d==="top"?j.fastShow().css({top:"0px",left:h.pos(i)}):d==="zigzagHorizontal"?(parseInt(f.squareSize,10),r.each(function(){b(this).css({opacity:0,top:parseInt(b(this).css("top"),10)-n+"px"})}),
y[d].delay()):this.direction==="zigzagVertical"?(parseInt(f.squareSize,10),r.each(function(){b(this).css({opacity:0,left:parseInt(b(this).css("left"),10)-i+"px"})}),y[d].delay()):j.fastShow().css({top:"0px",left:h.pos(i)})},perform:function(a,c){var d={duration:700,easing:"easeInOutQuad"},e=this.direction;if(e==="intuitive"||e==="intuitiveVertical")e=(a<c||c===0&&a===k.length-1)&&!(c===k.length-1&&a===0)?e==="intuitive"?"right":"top":e==="intuitive"?"left":"bottom";e==="left"?(l.animate({left:h.pos(i)},
d),j.animate({left:"0px"},d)):e==="top"?(l.animate({top:h.pos(n)},d),j.animate({top:"0px"},d)):e==="bottom"?(l.animate({top:h.neg(n)},d),j.animate({top:"0px"},d)):e==="top"?(l.animate({left:h.neg(i)},d),j.animate({left:"0px"},d)):e==="zigzagHorizontal"?(parseInt(f.squareSize,10),r.each(function(){b(this).animate({opacity:1,top:parseInt(b(this).css("top"),10)+n+"px"},d)})):e==="zigzagVertical"?(parseInt(f.squareSize,10),r.each(function(){b(this).animate({opacity:1,left:parseInt(b(this).css("left"),
10)+i+"px"},d)})):(l.animate({left:h.neg(i)},d),j.animate({left:"0px"},d))}},scale:{duration:1100,direction:"",setup:function(){var a,c,d;if(this.direction==="right")a=h.pos(n/2),c=h.pos(i);else if(this.direction==="left")a=h.pos(n/2),c="0px";else if(this.direction==="top")a="0px",c=h.pos(i/2);else if(this.direction==="bottom")a=h.pos(n),c=h.pos(i/2);else if(this.direction==="center")a=h.pos(n/2),c=h.pos(i/2);else{this.direction==="zigzagHorizontal"?(d=parseInt(f.squareSize,10),r.each(function(){b(this).css({top:parseInt(b(this).css("top"),
10)+d/2+"px",left:parseInt(b(this).css("left"),10)+d/2+"px",height:"0px"})})):this.direction==="zigzagVertical"?(d=parseInt(f.squareSize,10),r.each(function(){b(this).css({top:parseInt(b(this).css("top"),10)+d/2+"px",left:parseInt(b(this).css("left"),10)+d/2+"px",width:"0px"})})):(d=parseInt(f.squareSize,10),r.each(function(){b(this).css({top:parseInt(b(this).css("top"),10)+d/2+"px",left:parseInt(b(this).css("left"),10)+d/2+"px",width:"0px",height:"0px"})}));y[this.direction].delay();return}j.css({top:a,
left:c,width:"1px",height:"1px"})},perform:function(){if(b.inArray(this.direction,["center","top","left","bottom","right"])>-1)j.animate({top:"0px",left:"0px",width:i,height:n},{duration:1E3,easing:"easeInOutQuad"});else{var a=parseInt(f.squareSize,10);r.each(function(c,d){b(this).animate({top:parseInt(b(d).css("top"),10)-a/2+"px",left:parseInt(b(d).css("left"),10)-a/2+"px",width:a+"px",height:a+"px"},500)})}}}},F={width:"960px",height:"400px",squareSize:"80px",autoplay:!0,showControls:!0,showPause:!0,
showPaginator:!0,showThumbnails:!0,showTimer:!0,removeSlidesWithBrokenImages:!0};return this.each(function(){b(this);if(v[f])return v[f].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof f==="object"||!f)return v.init.apply(this,[F,f]);else b.error("Method "+f+" does not exist on uBillboard")})}})(jQuery);