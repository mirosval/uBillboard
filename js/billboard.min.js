/*

 uBillboard - Premium Slide for WordPress

 Version: 3.5.3

 Copyright: uDesignStudios (Miroslav Zoricak, Jan Keselak) 2011

*/
(function(b){function F(b){try{console.log(b)}catch(h){}}b.extend(jQuery.easing,{easeInOutQuad:function(b,h,D,n,l){return 1>(h/=l/2)?n/2*h*h+D:-n/2*(--h*(h-2)-1)+D},easeInOutCirc:function(b,h,D,n,l){return 1>(h/=l/2)?-n/2*(Math.sqrt(1-h*h)-1)+D:n/2*(Math.sqrt(1-(h-=2)*h)+1)+D}});jQuery.fn.fastShow=function(){this.each(function(){this.style.display="block"});return this};jQuery.fn.fastHide=function(){this.each(function(){this.style.display="none"});return this};b.fn.uBillboard=function(f){var h,D,
n,l,v,B,E,t,G,p,w,r,x,H,k,m,u,y={init:function(a,d){function c(){h.add(B).add(n).add(l).css({width:"100%",height:"100%"});k=h.width();m=k*I;h.add(B).add(n).add(l).css({width:k+"px",height:m+"px"});var a=b(".uds-bb-preloader-indicator",h);b(".uds-bb-preloader",h).css({top:parseInt(m,10)/2-a.height()/2+"px",left:parseInt(k,10)/2-a.width()/2+"px"});b(".uds-center",h).each(function(){var a=b(this).outerWidth()/2,c=b(this).outerHeight()/2;b(this).css({top:m/2-c,left:k/2-a})});b(".uds-center-vertical",
h).each(function(){var a=b(this).outerHeight()/2;b(this).css({top:m/2-a})});b(".uds-center-horizontal",h).each(function(){var a=b(this).outerWidth()/2;b(this).css({left:k/2-a})});for(a=0;a<p.length;a++)if(p[a].hasVideo)for(var c=b(".uds-bb-slide-"+a+">*",h),d=0;d<c.length;d++){var g=c.eq(d),q=b(g).attr("width")/b(g).attr("height"),e=b(g).attr("width"),r=b(g).attr("height");b(g).attr("height")>m?(r=m,e=r*q):b(g).attr("width")>k&&(e=k,r=e/q);g.css({position:"absolute",top:m/2-r/2,left:k/2-e/2,width:e,
height:r,margin:"auto"})}b(".uds-bb-slide>canvas").each(function(){b(this).css({width:k,height:m}).attr({width:k,height:m})});b(".uds-bb-slide>.uds-bb-description").each(function(){var a=b(this),c="top bottom height right left width".split(" "),d=["font-size","margin-left","margin-top","margin-right","margin-bottom"],g={},q=m/parseInt(f.height,10),e=k/parseInt(f.width,10);"undefined"===typeof a.data("original-position")&&(a.data("original-position",!0),b.each(c,function(c,b){a.data(b,parseInt(a.css(b),
10))}),b("h1,h2,h3,h4,h5,h6,p,div,span,ul,ol,li,a",a).each(function(){var a=b(this);b.each(d,function(c,b){a.data(b,parseInt(a.css(b),10))})}));b.each(c,function(b,c){var d=3>b?q:e,f=a.data(c);g[c]=isNaN(f)?"auto":f*d});b("h1,h2,h3,h4,h5,h6,p,div,span,ul,ol,li,a",a).each(function(){var a=b(this);b.each(d,function(b,c){a.css(c,a.data(c)*e)})});a.css(g)})}h=b(this);D=b(".uds-bb-slides",h);f=b.extend(a,d);h.css("overflow","visible");h.add(D).css({maxWidth:f.width,maxHeight:f.height});k=parseInt(f.width,
10);m=parseInt(f.height,10);w={};H=x=!1;r=0;var g=e.preloadRequired();e.initSlides();e.initAnimationMarkup();var q=g;g&&(e.initPreloader(),q=e.preloadImages());e.initControls();h.on("click",e.handleBillboardClicks);e.setCursor();e.initTouchSupport();!1===q&&(h.trigger("udsBillboardLoadingDidComplete"),e.loadingCompleted());var I=parseInt(f.height,10)/parseInt(f.width,10);c();e.isMobile()?b(window).bind("orientationchange",c):b(window).resize(c)},animateSlide:function(a,d){if(a!==r)if("boolean"!==
typeof d&&(d=!0),null===p[a])b.error("Slide ID "+a+" does not exist");else{h.trigger("udsBillboardSlideWillChange",r);var c=p[a];p[r].hasVideo&&e.pauseVideo(p[r]);e.prepareForAnimation(a);e.handleEmbeddedContent(c);var g=0;if(d){var q="fade";null!==c.transition&&"string"===typeof c.transition&&(q=c.transition);if(null===z[q]||"object"!==typeof z[q])F('Transition "'+q+'" is not defined'),q="fade";g=z[q].direction;z[q].direction=null===C[c.direction]||"object"!==typeof C[c.direction]?null===C[g]||"object"!==
typeof C[g]?"right":g:c.direction;l.css("opacity",1).fastShow();H=!0;null!==z[q].setup&&"function"===typeof z[q].setup&&z[q].setup(r,a);null!==z[q].perform&&"function"===typeof z[q].perform&&z[q].perform(r,a);g=1E3;null!==z[q].duration&&"number"===typeof z[q].duration&&(g=z[q].duration)}clearTimeout(w.transitionComplete);w.transitionComplete=setTimeout(function(){n.stop().css({"-webkit-transition":"-webkit-transform 0s","-webkit-transform":"translate3d(0px,0px,0px)",top:"0px",left:"0px",opacity:1});
l.css({"-webkit-transition":"all 0s","-webkit-transform":"translate3d(0px,0px,0px)"});e.forceReflow();b(".uds-bb-slide",n).fastHide();b(".uds-bb-slide-"+c.id,n).fastShow();b(".uds-bb-description",n).fastShow();l.stop().fastHide();H=!1;c.autoplayVideo&&f.pauseOnVideo&&e.playVideo(c);c.kenBurns&&e.kenBurns(c);h.trigger("udsBillboardTransitionDidComplete",a)},g);r=a;h.trigger("udsBillboardSlideDidChange",r);f.pauseOnVideo&&p[r].hasVideo?(null!==t&&"undefined"!==typeof t&&t.fastHide(),clearTimeout(w.nextSlideAnimation)):
(c.stop&&(x=!1),e.setCursor(),x?e.animateCountdown(p[r].delay):null!==t&&"undefined"!==typeof t&&t.fastHide(),x&&!c.stop&&y.play())}},next:function(a){"undefined"!==typeof a&&a.stopPropagation();a=e.getNextSlideId();y.animateSlide(a)},prev:function(a){"undefined"!==typeof a&&a.stopPropagation();a=e.getPrevSlideId();y.animateSlide(a)},random:function(a){"undefined"!==typeof a&&a.stopPropagation();a=Math.floor(Math.random()*p.length+1);y.animateSlide(a)},play:function(a){"undefined"!==typeof a&&a.stopPropagation();
if("number"!==typeof r||null===r)r=0;null!==w&&null!==w.nextSlideAnimation&&clearTimeout(w.nextSlideAnimation);"undefined"!==typeof t&&null!==t&&t.fastShow();x||e.animateCountdown(p[r].delay);clearTimeout(w.nextSlideAnimation);w.nextSlideAnimation=setTimeout(function(){y.next()},p[r].delay);x=!0;h.trigger("didChangePlayingState",{playing:x})},pause:function(a){"undefined"!==typeof a&&a.stopPropagation();x=!1;h.trigger("didChangePlayingState",{playing:x});null!==w.nextSlideAnimation&&clearTimeout(w.nextSlideAnimation);
"undefined"!==typeof t&&null!==t&&t.fastHide()},playpause:function(a){x?y.pause(a):y.play(a)}},e={initSlides:function(){var a={delay:5E3,hasVideo:!1,linkTarget:"",transition:"fade",direction:"",bg:"",bgColor:"transparent",repeat:"no-repeat",link:"",stop:!1,autoplayVideo:!0,kenBurns:!1,kenBurnsSpeed:4E3,retina:!1,html:""};p=[];b(".uds-bb-slide",h).each(function(d,c){var g=e.maybeUseRetina(b(".uds-bb-bg-image",c).remove().attr("src"),f.slides[d]),g=b.extend({},a,f.slides[d],{id:d,bg:g,link:b(".uds-bb-link",
c).remove().attr("href"),html:b(c).remove().html()}),q=b("<div class='uds-bb-slide-"+d+" uds-bb-slide'>");q.css({display:"none",maxWidth:f.width,maxHeight:f.height,width:"100%",height:"100%"}).css(e.getSlideBackgroundCSS(g)).html(g.html);g.cache=q;p.push(g)})},preloadRequired:function(){var a=!0;b(".uds-bb-bg-image",h).each(function(){var d=b(this).get(0);a=a&&d.complete});return!a},initPreloader:function(){h.append('<div class="uds-bb-preloader-wrapper"><div class="uds-bb-preloader"><div class="uds-bb-preloader-indicator"></div></div></div>');
G=b(".uds-bb-preloader-wrapper",h);var a=b(".uds-bb-preloader-indicator",G);b(".uds-bb-preloader",h).css({top:parseInt(m,10)/2-a.height()/2+"px",left:parseInt(k,10)/2-a.width()/2+"px"})},updatePreloader:function(a){var d=b(".uds-bb-preloader-indicator",G);d.stop().animate({left:"-"+Math.round((1-a)*d.width())+"px"},200);1<=a&&d.fadeOut("200",function(){G.remove()})},preloadImages:function(){for(var a=0,d=p.length,c=!1,g=0;g<d;g++)""!==p[g].bg&&(c=!0);if(!c)return e.updatePreloader(1),h.trigger("udsBillboardLoadingDidComplete"),
e.loadingCompleted(),!1;for(g=0;g<d;g++)""===p[g].bg?++a:b("<img>").data("slideID",g).load(function(){++a;e.updatePreloader(a/d);a===d&&(h.trigger("udsBillboardLoadingDidComplete"),e.loadingCompleted())}).error(function(){var c=b(this).data("slideID");F("Failed to load image: "+p[c].bg);++a;e.updatePreloader(a/d);a===d&&(h.trigger("udsBillboardLoadingDidComplete"),e.loadingCompleted());!0===f.removeSlidesWithBrokenImages&&p.splice(c,1)}).attr("src",p[g].bg);return!0},loadingCompleted:function(){r=
0;var a=p[r];e.getSlideBackgroundCSS(a);b(".uds-bb-slide-0",n).fastShow().fadeTo(300,1);b(".uds-bb-description",n).fastShow();e.handleEmbeddedContent(a);E.delay(300).fadeTo(300,1);a.kenBurns&&(e.prepareKenBurns(a),e.kenBurns(a));var d=f.pauseOnVideo&&a.hasVideo;!0===f.autoplay?d?a.autoplayVideo&&e.playVideo(a):(e.animateCountdown(p[r].delay),y.play()):"undefined"!==typeof t&&null!==t&&t.fastHide()},initAnimationMarkup:function(){b(".uds-bb-slides",h).append("<div class='uds-stage'>").append("<div class='uds-next'>");
n=b(".uds-stage",h);l=b(".uds-next",h);l.fastHide();b(n).add(l).css({maxWidth:f.width,maxHeight:f.height,width:"100%",height:"100%",opacity:0});if(!e.isSlowBrowser())for(var a=parseInt(f.width,10),d=parseInt(f.height,10),c=parseInt(f.squareSize,10),a=Math.ceil(a/c),d=Math.ceil(d/c),c=0;c<d;c++)for(var g=0;g<a;g++)b("<div>",{"class":"uds-square uds-column-"+g+" uds-row-"+c+" uds-square-"+(g+a*c)}).data("position",{x:g,y:c}).append(b("<div>",{"class":"uds-square-inside"})).appendTo(l);e.resetAnimation();
v=b(".uds-square",h);B=b(".uds-square-inside",h);E=b(".uds-bb-controls",h);for(a=0;a<p.length;a++)d=p[a],n.append(d.cache.clone()),d.hasVideo||B.append(d.cache.clone());b(">div",n).add(">div",B).fastHide();e.createCountdown()},resetAnimation:function(){for(var a=parseInt(f.width,10),d=parseInt(f.height,10),c=parseInt(f.squareSize,10),g=Math.ceil(a/c),q=Math.ceil(d/c),e=0;e<q;e++)for(var k=0;k<g;k++)b(".uds-square-"+(k+g*e),h).css({width:c,height:c,top:e*c,left:k*c,opacity:1}).stop(!0,!0).find(".uds-square-inside").css({width:a,
height:d,top:-(e*c),left:-(k*c),opacity:1}).stop(!0,!0);n.css({opacity:1}).add(l).css({top:"0px",left:"0px"})},prepareForAnimation:function(a){var d=p[r],c=p[a];"undefined"===typeof d||null===d?F("Slide "+r+" does not exist! (Current Slide)"):"undefined"===typeof c||null===c?F("Slide "+a+" does not exist! (Next Slide)"):(b(".uds-bb-slide",n).fastHide(),b(".uds-bb-slide-"+d.id,n).fastShow(),b(".uds-bb-description",n).fastShow(),e.resetAnimation(),clearInterval(w.kenBurnsCanvasTimer),c.kenBurns&&e.prepareKenBurns(c),
c.hasVideo||e.isSlowBrowser()?(0<b(".uds-bb-square",l).length&&v.detach(),b(">.uds-bb-slide",l).remove(),l.append(b(">.uds-bb-slide-"+c.id,n).clone().css("display","block"))):(0===b(".uds-bb-square",l).length&&(b(">.uds-bb-slide",l).remove(),l.append(v)),b(".uds-bb-slide",B).fastHide(),b(".uds-bb-slide-"+c.id,B).fastShow(),b(".uds-bb-description",B).fastShow(),b(".uds-bb-slide-"+c.id,B).css({width:k+"px",height:m+"px"})))},handleBillboardClicks:function(a){a=p[r];"string"===typeof a.link&&""!==a.link&&
"#"!==a.link&&("_blank"===a.linkTarget?window.open(a.link,"_blank"):window.location.href=a.link)},initControls:function(){E=b(".uds-bb-controls",h);E.fastShow().css({maxWidth:f.width,maxHeight:f.height,width:"100%",height:"100%",opacity:0});-1<e.getIEVersion()&&8>e.getIEVersion()&&b(".uds-bb-paginator").css("position","static");var a=b(".uds-bb-playpause",h),d=b(".uds-bb-next",h),c=b(".uds-bb-prev",h),g=b(".uds-bb-paginator",h),q=b(".uds-bb-position-indicator-bullets",h),k=b(".uds-bb-thumbnails",
h),l=b(".uds-bb-thumb",k),n=b(".uds-bb-thumbnail-container",k);a.click(y.playpause);d.click(y.next);c.click(y.prev);a.addClass("play");h.bind("didChangePlayingState",function(c,b){a.removeClass("play pause");b.playing?a.addClass("pause"):a.addClass("play")});b(".uds-bb-position-indicator",h).text("1/"+p.length);for(var m="",t=0;t<p.length;t++)m+="<div class='uds-bb-bullet'></div>";q.append(m).find("div:first").addClass("active");b("div",q).click(function(a){"undefined"!==typeof a&&a.stopPropagation();
y.animateSlide(b(this).index())});h.bind("udsBillboardSlideDidChange",function(){b(".uds-bb-position-indicator").text(r+1+"/"+p.length);b("div",q).removeClass("active").eq(r).addClass("active");l.css("background-color","").removeClass("active").eq(r).addClass("active").css("background-color",f.thumbnailHoverColor);!0===f.thumbnailHoverColorTransparent&&l.css("background-color","transparent")});l.removeClass("active").eq(0).addClass("active");l.click(function(a){"undefined"!==typeof a&&a.stopPropagation();
y.animateSlide(b(this).index())});k.is(".top,.bottom")&&n.css("width","10000px");l.each(function(a){var c=b("img",this);c.css({width:c.attr("width")+"px",height:c.attr("height")+"px"});b(this).css({width:c.attr("width")+"px",height:c.attr("height")+"px"});e.shouldUseRetina()&&c.attr("src",c.attr("src").replace("-thumb.","-thumb-retina."));""!==p[a].bg||p[a].hasVideo||(c.replaceWith("<div>"),b("div",this).css({width:c.attr("width")+"px",height:c.attr("height")+"px",backgroundColor:p[a].bgColor}));
if(!0===f.thumbnailHoverColorTransparent)b(this).css("background-color","transparent");else{var d=b(this).css("background-color"),g="";-1<d.indexOf("rgb(")?(a=d.match(/rgb\(([0-9]{1,3}), ([0-9]{1,3}), ([0-9]{1,3})/),g={r:parseInt(a[1],10),g:parseInt(a[2],10),b:parseInt(a[3],10)}):g={r:parseInt(d.substr(1,2),16),g:parseInt(d.substr(3,2),16),b:parseInt(d.substr(5,2),16)};b(this).is(".active")&&b(this).css("background-color",f.thumbnailHoverColor);var q=parseInt(f.thumbnailHoverColor.substr(1,2),16),
h=parseInt(f.thumbnailHoverColor.substr(3,2),16),k=parseInt(f.thumbnailHoverColor.substr(5,2),16);b(this).hover(function(){b(this).is(".active")?b(this).css("background-color",f.thumbnailHoverColor):b(this).css("background-color",d).stop().animate({opacity:1},{duration:200,step:function(a,c){var b=((new Date).getTime()-c.startTime)/c.options.duration,d=Math.round(g.r*(1-b)+q*b),f=Math.round(g.g*(1-b)+h*b),b=Math.round(g.b*(1-b)+k*b);c.elem.style.backgroundColor="rgb("+d+","+f+","+b+")"}})},function(){b(this).is(".active")?
b(this).css("background-color",f.thumbnailHoverColor):b(this).css("background-color",f.thumbnailHoverColor).stop().animate({opacity:1},{duration:200,step:function(a,c){var b=((new Date).getTime()-c.startTime)/c.options.duration,d=Math.round(g.r*b+q*(1-b)),f=Math.round(g.g*b+h*(1-b)),b=Math.round(g.b*b+k*(1-b));c.elem.style.backgroundColor="rgb("+d+","+f+","+b+")"}})})}});h.has(".uds-bb-thumbnails.top:not(.inside)").css("margin-top",k.outerHeight());h.has(".uds-bb-thumbnails.bottom:not(.inside)").css("margin-bottom",
k.outerHeight());h.has(".uds-bb-thumbnails.left:not(.inside)").css("margin-left",k.outerWidth());h.has(".uds-bb-thumbnails.right:not(.inside)").css("margin-right",k.outerWidth());b("<div class='uds-thumbnails-shadow-left'>").appendTo(k);b("<div class='uds-thumbnails-shadow-right'>").appendTo(k);var u,v,z,x=0,B=k.is(".right,.left")?"vertical":"horizontal";"vertical"===B?(u=k.height(),m=(l.outerHeight(!0)-l.outerHeight())/2,v=l.length*l.outerHeight(!0)-(l.length-1)*m,z="top",n.css("height",v+"px")):
(u=k.width(),m=l.outerWidth(!0),0===m&&(m=parseInt(b("img",l).attr("width"),10)+18),v=l.length*m,z="left",n.css("width",v+"px"));u>v&&(x=u/2-v/2,n.css(z,x+"px"));var C=function(a){u="vertical"===B?k.height():k.width();u>v&&(x=u/2-v/2);var c=0,b=0;null!==a&&"undefined"!==typeof a&&(c="vertical"===B?a.pageY-k.offset().top:a.pageX-k.offset().left);b=c-u/2;b=b/(u/2)*5;if(0>b&&0<x||0<b&&x<v-u)x+=b;if((null===a||"undefined"===typeof a)&&u>v)x=-(u/2-v/2);else if(u>v)return;n.css(z,-x+"px")};e.isMobile()?
k.css("overflow","scroll"):k.bind({"mouseenter mousemove":function(a){clearInterval(w.thumbMove);w.thumbMove=setInterval(function(){C(a)},10)},mouseleave:function(){clearInterval(w.thumbMove)}});b(window).resize(function(a){0!==k.length&&(clearInterval(w.thumbMove),C())});var A=b("");"hover"===f.showControls&&(A=A.add(d).add(c));"hover"===f.showPause&&(A=A.add(a));"hover"===f.showPaginator&&(A=A.add(q).add(b(".uds-bb-position-indicator",h)));"hover"===f.showThumbnails&&(A=A.add(k));"hover"!==f.showPaginator&&
"hover"!==f.showPause&&"hover"!==f.showControls||!0===f.showPaginator||!0===f.showPause||!0===f.showControls||(A=g);m=b(".uds-bb-position-indicator-bullets-container",h);0<m.length&&("hover"===f.showPause||"hover"===f.showPaginator)&&(A=A.add(m));!1===f.showPaginator&&!1===f.showPause&&!1===f.showControls&&g.fadeTo(0,0);A.fadeTo(0,0);h.hover(function(){!1===f.showPaginator&&!1===f.showPause&&!1===f.showControls||A.stop().fadeTo(300,1)},function(){A.stop().fadeTo(300,0)});!1===f.showControls&&(d.fastHide(),
c.fastHide());!1===f.showPause&&a.fastHide();!1===f.showPaginator&&(q.fastHide(),b(".uds-bb-position-indicator",h).fastHide());!1===f.showThumbnails&&k.fastHide();0===b(">*",m).not(":hidden").length&&m.fastHide()},initTouchSupport:function(){b(".uds-bb-slides",h).on("touchstart touchmove touchend touchcancel",function(a){if(!H){var d=a.originalEvent;"touchstart"===d.type&&(u={startX:d.touches[0].clientX,time:(new Date).getTime(),absoluteStartTime:(new Date).getTime()},b(".uds-bb-slides",h).css("overflow",
"hidden"),clearTimeout(w.nextSlideAnimation),"object"===typeof t&&t.fastHide(),n.add(l).css("-webkit-transition","none"),e.forceReflow(),n.stop().css({left:0,"-webkit-transform":"translate3d(0px,0px,0px)"}),l.stop().css({left:k,"-webkit-transform":"translate3d(0px,0px,0px)"}),e.forceReflow());if("touchmove"===d.type){var c=d.touches[0].clientX-u.startX,g=d.touches[0].clientX-u.currentX;u.currentX=d.touches[0].clientX;var f=(new Date).getTime(),m=f-u.time;u.time=f;u.speed=g/(m/1E3);(g=150>(new Date).getTime()-
u.absoluteStartTime)||a.preventDefault();0<c?(u.direction=-1,g=e.getPrevSlideId()):(u.direction=1,g=e.getNextSlideId());u.slideId=g;p[r].hasVideo&&e.pauseVideo(p[r]);e.prepareForAnimation(g);e.handleEmbeddedContent(p[r]);n.add(l).css("-webkit-transition","none");e.forceReflow();n.css("-webkit-transform","translate3d("+c+"px,0px,0px)");u.left=0<c?-k+c:k+c;l.fastShow().css({"-webkit-transform":"translate3d("+u.left+"px,0px,0px)",opacity:1});e.forceReflow()}if("touchend"===d.type||"touchcancel"===d.type)d=
Math.abs(u.left)<k/2,c=100<Math.abs(u.speed),g=150>(new Date).getTime()-u.absoluteStartTime,n.add(l).css({left:0,"-webkit-transition":"-webkit-transform 300ms linear"}),e.forceReflow(),!d&&!c||g?(n.css({"-webkit-transform":"translate3d(0px,0px,0px)"}),l.fastShow().css({"-webkit-transform":"translate3d("+u.direction*k+"px,0px,0px)"}),e.forceReflow(),g||a.preventDefault()):(n.css({"-webkit-transform":"translate3d("+-u.direction*k+"px,0px,0px)"}),l.fastShow().css({"-webkit-transform":"translate3d(0px,0px,0px)"}),
e.forceReflow(),n.one("webkitTransitionEnd",function(){y.animateSlide(u.slideId,!1)}),a.preventDefault())}})},forceReflow:function(){l.add(n).css("offsetTop")},setCursor:function(){var a="default",b=p[r];"string"===typeof b.link&&""!==b.link&&"#"!==b.link&&(a="pointer");n.add(".uds-bb-paginator",h).css("cursor",a)},getNextSlideId:function(){var a=r+1;return"undefined"===typeof p[a]?0:a},getPrevSlideId:function(){var a=r-1;return"undefined"===typeof p[a]?p.length-1:a},createCountdown:function(){if(!1!==
f.showTimer){var a=100,d=a,c=null,c=null;window.devicePixelRatio&&(a=d*window.devicePixelRatio);t=b('<div class="uds-bb-countdown"></div>').appendTo(E);c=t.append('<canvas width="'+a+'" height="'+a+'">').find("canvas").get(0);b("canvas",t).css({width:d+"px",height:d+"px"});c&&"function"===typeof c.getContext?(c=c.getContext("2d"),c.lineWidth=3,c.strokeStyle="white",c.shadowOffsetX=0,c.shadowOffsetY=0,c.shadowBlur=2,c.shadowColor="black",t.data("context",c)):(t.remove(),t=null)}},animateCountdown:function(a){if(null!==
t&&"undefined"!==typeof t&&!1!==f.showTimer){var b=t.data("context"),c=0,g=100;if("undefined"===typeof b)clearInterval(w.countDown);else{if(!1!==a){var q=(new Date).getTime();t.data("start",q);t.data("duration",a);clearInterval(w.countDown);w.countDown=setInterval(function(){e.animateCountdown(!1)},30)}else c=(new Date).getTime()-t.data("start"),a=t.data("duration");1<=c/a&&clearInterval(w.countDown);window.devicePixelRatio&&(g=100*window.devicePixelRatio);b.clearRect(0,0,g,g);b.beginPath();b.arc(g/
2,g/2,g/5,-Math.PI/2,-Math.PI/2+c/a*Math.PI*2,!1);b.lineWidth=3*g/100;b.stroke()}}},getSlideBackgroundCSS:function(a){return""!==a.bg?{backgroundColor:a.bgColor,backgroundImage:"url("+a.bg+")",backgroundRepeat:a.repeat}:{backgroundColor:a.bgColor,backgroundImage:"",backgroundRepeat:a.repeat}},handleEmbeddedContent:function(a){if(a.hasVideo&&!0!==a.embeddecContentHandled){var d=b(">.uds-bb-slide-"+a.id+">*",n);d.is("object")&&(d.prepend("<param name='wmode' value='opaque' />"),b("embed",d).attr("wmode",
"opaque"));d.css({position:"absolute",top:parseInt(f.height,10)/2-d.attr("height")/2,left:parseInt(f.width,10)/2-d.attr("width")/2,margin:"auto"});a.embeddecContentHandled=!0}},playVideo:function(a){if("function"===typeof window.postMessage&&"undefined"!==typeof JSON){a=b(".uds-stage .uds-bb-slide-"+a.id,h);a=b("iframe",a);b(window).off("message");for(var d=0;d<b("iframe").length;d++)if(b("iframe").eq(d).get(0)===a.get(0)){var c=a.get(0).getAttribute("src").split("?")[0];"//"===c.substr(0,2)&&(c=
window.location.protocol+c);window.frames[d].postMessage(JSON.stringify({event:"command",func:"playVideo",args:null,id:a.attr("id")}),c);window.frames[d].postMessage(JSON.stringify({method:"play"}),c);var g=d;b(window).on("message",function(a){a=a.originalEvent;"http://www.youtube.com"===a.origin?(a=JSON.parse(a.data),"onStateChange"===a.event&&0===a.info.playerState&&y.play()):(a=JSON.parse(a.data),"undefined"!==typeof a.event&&"ready"===a.event?window.frames[g].postMessage(JSON.stringify({method:"addEventListener",
value:"finish"}),c):"undefined"!==typeof a.event&&"finish"===a.event&&y.play())})}}},pauseVideo:function(a){if("function"===typeof window.postMessage&&"undefined"!==typeof JSON){a=b(".uds-stage .uds-bb-slide-"+a.id,h);a=b("iframe",a);for(var d=0;d<b("iframe").length;d++)b("iframe").eq(d).get(0)===a.get(0)&&(window.frames[d].postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:null,id:a.attr("id")}),"*"),window.frames[d].postMessage(JSON.stringify({method:"pause"}),"*"))}},prepareKenBurns:function(a){if(!a.hasVideo){if("undefined"===
typeof a.kenBurnsImageCache){var d=b(".uds-bb-slide-"+a.id,h),c=new Image;a.kenBurnsImage=c;var g=b("<canvas>").css({position:"relative",width:k||f.width,height:m||f.height}).attr({width:k||f.width,height:m||f.height}).appendTo(d).get(0);if("function"===typeof g.getContext){var e=g.getContext("2d");a.kenBurnsCanvasCache=e;a.kenBurnsImageCache=!1;c.onLoad=function(){e.clearRect(0,0,k,m);e.drawImage(c,0,0)};c.src=a.bg.replace("-full.","-ken.")}else b(g).remove(),a.kenBurnsCanvasCache=!1,c.src=a.bg.replace("-full.",
"-ken."),b(c).addClass("uds-ken-burns"),d.css({overflow:"hidden"}).append(c),a.kenBurnsImageCache=b(".uds-bb-slide-"+a.id+" img.uds-ken-burns",h),a.kenBurnsImageCache.css({position:"relative",display:"block","-ms-interpolation-mode":"bicubic"})}a.kenBurnsCanvasCache?a.kenBurnsCanvasStartingCSS={top:0,left:0,width:k,height:m}:a.kenBurnsImageCache.css({top:0,left:0,width:k,height:m})}},kenBurns:function(a){if(!(a.hasVideo||"undefined"===typeof a.kenBurnsImageCache&&"undefined"===typeof a.kenBurnsCanvasCache))if(a.kenBurnsCanvasCache){clearInterval(w.kenBurnsCanvasTimer);
var b=new Date,c=e.kenBurnsCSS(!1);a.kenBurnsCanvasCache.clearRect(0,0,k,m);a.kenBurnsCanvasCache.drawImage(a.kenBurnsImage,0,0,k,m);w.kenBurnsCanvasTimer=setInterval(function(){var g=((new Date).getTime()-b.getTime())/a.kenBurnsSpeed,f=a.kenBurnsCanvasStartingCSS;a.kenBurnsCanvasCache.clearRect(0,0,k,m);a.kenBurnsCanvasCache.drawImage(a.kenBurnsImage,(1-g)*f.left+g*c.left,(1-g)*f.top+g*c.top,(1-g)*f.width+g*c.width,(1-g)*f.height+g*c.height);1<=g&&(b=new Date,a.kenBurnsCanvasStartingCSS=c,c=e.kenBurnsCSS(!1,
c))},20)}else c=e.kenBurnsCSS(!0),a.kenBurnsImageCache.eq(0).stop().animate(c,{duration:a.kenBurnsSpeed,easing:"easeInOutQuad",complete:function(){a.id===r&&e.kenBurns(a,c)}})},kenBurnsCSS:function(a,b){function c(){var a;a=0+Math.abs(g.scale-1);a+=Math.abs(g.top);return a+=Math.abs(g.left)}var g,e,h;"undefined"==typeof b&&(b={top:0,left:0,width:k,height:m});do g={scale:1.2-.4*Math.random(),top:-.2+.4*Math.random(),left:-.2+.4*Math.random()};while(.2>c());e={top:g.top*m,left:g.left*k,width:k*g.scale,
height:m*g.scale};h=parseInt(f.height,10)/parseInt(f.width,10);0<e.top&&(e.top=0);0<e.left&&(e.left=0);e.top+e.height<m&&(e.height=-e.top+m,e.width=e.height/h);e.left+e.width<k&&(e.width=-e.left+k,e.height=e.width*h);a&&(e.top+="px",e.left+="px",e.width+="px",e.height+="px");return e},getIEVersion:function(){var a=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1));return a},isSlowBrowser:function(){return e.isMobile()||
-1<e.getIEVersion()&&9>e.getIEVersion()},isMobile:function(){var a=navigator.userAgent,d=b.isArray(a.match(/(iPhone|iPod|iPad)/)),c=b.isArray(a.match(/BlackBerry/)),a=b.isArray(a.match(/Android/));return d||c||a?!0:!1},shouldUseRetina:function(){return"number"===typeof window.devicePixelRatio?1<window.devicePixelRatio:!1},maybeUseRetina:function(a,b){var c="undefined"!==typeof b.retina?b.retina:!1;return e.shouldUseRetina()&&c?a.replace("-full.","-full-retina."):a},pos:function(a){return Math.abs(parseInt(a,
10))+"px"},neg:function(a){return"-"+Math.abs(parseInt(a,10))+"px"}},C={none:{delay:b.noop},intuitive:{delay:b.noop},intuitiveVertical:{delay:b.noop},left:{delay:function(){for(var a=Math.ceil(parseInt(f.width,10)/parseInt(f.squareSize,10)),d=0;d<a;d++)b(".uds-column-"+d,h).delay(600/a*d)}},right:{delay:function(){for(var a=Math.ceil(parseInt(f.width,10)/parseInt(f.squareSize,10)),d=0;d<a;d++)b(".uds-column-"+d,h).delay(600-600/a*d)}},top:{delay:function(){for(var a=Math.ceil(parseInt(f.height,10)/
parseInt(f.squareSize,10)),d=0;d<a;d++)b(".uds-row-"+d,h).delay(600/a*d)}},bottom:{delay:function(){for(var a=Math.ceil(parseInt(f.height,10)/parseInt(f.squareSize,10)),d=0;d<a;d++)b(".uds-row-"+d,h).delay(600-600/a*d)}},center:{delay:function(){for(var a=Math.ceil(parseInt(f.height,10)/parseInt(f.squareSize,10)),d=Math.ceil(parseInt(f.width,10)/parseInt(f.squareSize,10)),c=0;c<d;c++)for(var g=0;g<a;g++){var e=Math.sqrt(Math.pow(c-d/2+.5,2)+Math.pow(g-a/2+.5,2))/Math.sqrt(Math.pow(d/2,2)+Math.pow(a/
2,2));b(".uds-square-"+(g*d+c)).delay(700*e)}}},randomSquares:{delay:function(){v.each(function(){b(this).delay(700*Math.random())})}},spiralIn:{delay:function(){for(var a=Math.ceil(parseInt(f.width,10)/parseInt(f.squareSize,10)),d=Math.ceil(parseInt(f.height,10)/parseInt(f.squareSize,10)),c=0,g=a-1,e=0,h=d-1,k=0,l=0,m=0;k<a*d;)b(".uds-square-"+(a*m+l)).delay(k/(a*d)*1E3),m===e&&l<g?l++:l===g&&m<h?m++:m===h&&l>c?l--:(m--,m===e&&(l++,m++,c++,g--,e++,h--)),k++}},spiralOut:{delay:function(){for(var a=
Math.ceil(parseInt(f.width,10)/parseInt(f.squareSize,10)),d=Math.ceil(parseInt(f.height,10)/parseInt(f.squareSize,10)),c=0,g=a-1,e=0,h=d-1,k=0,l=0,m=0;k<a*d;)b(".uds-square-"+(a*m+l)).delay(1E3-k/(a*d)*1E3),m===e&&l<g?l++:l===g&&m<h?m++:m===h&&l>c?l--:(m--,m===e&&(l++,m++,c++,g--,e++,h--)),k++}},chess:{delay:function(){for(var a=Math.ceil(parseInt(f.height,10)/parseInt(f.squareSize,10)),d=Math.ceil(parseInt(f.width,10)/parseInt(f.squareSize,10)),c=0;c<d;c++)for(var e=0;e<a;e++){var h=0===e%2&&0===
c%2||1===e%2&&1===c%2?0:1;b(".uds-square-"+(e*d+c)).delay(200*h)}}},zigzagHorizontal:{delay:function(){for(var a=Math.ceil(parseInt(f.height,10)/parseInt(f.squareSize,10)),d=Math.ceil(parseInt(f.width,10)/parseInt(f.squareSize,10)),c=0;c<d;c++)for(var e=0;e<a;e++){var h=(e*a+(0===e%2?c:d-c))/(a*a+d/2);b(".uds-square-"+(e*d+c)).delay(700*h)}}},zigzagVertical:{delay:function(){for(var a=Math.ceil(parseInt(f.height,10)/parseInt(f.squareSize,10)),d=Math.ceil(parseInt(f.width,10)/parseInt(f.squareSize,
10)),c=0;c<d;c++)for(var e=0;e<a;e++){var h=(c*d+(0===c%2?e:a-e))/(d*d+a/2);b(".uds-square-"+(e*d+c)).delay(700*h)}}}},z={none:{duration:0,direction:"",setup:function(){l.fastHide()},perform:b.noop()},fade:{duration:1500,direction:"",setup:function(){(e.isSlowBrowser()?l:v).css({opacity:0})},perform:function(){var a=e.isSlowBrowser()?l:v;C[this.direction].delay();a.animate({opacity:1},{duration:500})}},crossFade:{duration:1E3,direction:"",setup:function(){(e.isSlowBrowser()?l:v).css({opacity:0})},
perform:function(){C[this.direction].delay();n.animate({opacity:0},{duration:1E3});(e.isSlowBrowser()?l:v).animate({opacity:1},{duration:500})}},slide:{duration:700,direction:"right",setup:function(a,d){b(".uds-bb-slides",h).css({overflow:"hidden"});n.css({top:"0px",left:"0px"});var c=this.direction;if("intuitive"===c||"intuitiveVertical"===c)c=!(a<d||0===d&&a===p.length-1)||d===p.length-1&&0===a?"intuitive"===c?"left":"bottom":"intuitive"===c?"right":"top";"left"===c?l.fastShow().css({top:"0px",
left:e.neg(k)}):"top"===c?l.fastShow().css({top:e.neg(m),left:"0px"}):"bottom"===c?l.fastShow().css({top:e.pos(m),left:"0px"}):"top"===c?l.fastShow().css({top:"0px",left:e.pos(k)}):"zigzagHorizontal"===c?(parseInt(f.squareSize,10),v.each(function(){b(this).css({opacity:0,top:parseInt(b(this).css("top"),10)-m+"px"})}),C[c].delay()):"zigzagVertical"===this.direction?(parseInt(f.squareSize,10),v.each(function(){b(this).css({opacity:0,left:parseInt(b(this).css("left"),10)-k+"px"})}),C[c].delay()):l.fastShow().css({top:"0px",
left:e.pos(k)})},perform:function(a,d){var c={duration:700,easing:"easeInOutQuad"},g=this.direction;if("intuitive"===g||"intuitiveVertical"===g)g=!(a<d||0===d&&a===p.length-1)||d===p.length-1&&0===a?"intuitive"===g?"left":"bottom":"intuitive"===g?"right":"top";"left"===g?(n.animate({left:e.pos(k)},c),l.animate({left:"0px"},c)):"top"===g?(n.animate({top:e.pos(m)},c),l.animate({top:"0px"},c)):"bottom"===g?(n.animate({top:e.neg(m)},c),l.animate({top:"0px"},c)):"top"===g?(n.animate({left:e.neg(k)},c),
l.animate({left:"0px"},c)):"zigzagHorizontal"===g?(parseInt(f.squareSize,10),v.each(function(){b(this).animate({opacity:1,top:parseInt(b(this).css("top"),10)+m+"px"},c)})):"zigzagVertical"===g?(parseInt(f.squareSize,10),v.each(function(){b(this).animate({opacity:1,left:parseInt(b(this).css("left"),10)+k+"px"},c)})):(n.animate({left:e.neg(k)},c),l.animate({left:"0px"},c))}},scale:{duration:1100,direction:"",setup:function(){var a,d,c;if("right"===this.direction)a=e.pos(m/2),d=e.pos(k);else if("left"===
this.direction)a=e.pos(m/2),d="0px";else if("top"===this.direction)a="0px",d=e.pos(k/2);else if("bottom"===this.direction)a=e.pos(m),d=e.pos(k/2);else if("center"===this.direction)a=e.pos(m/2),d=e.pos(k/2);else{"zigzagHorizontal"===this.direction?(c=parseInt(f.squareSize,10),v.each(function(){b(this).css({top:parseInt(b(this).css("top"),10)+c/2+"px",left:parseInt(b(this).css("left"),10)+c/2+"px",height:"0px"})})):"zigzagVertical"===this.direction?(c=parseInt(f.squareSize,10),v.each(function(){b(this).css({top:parseInt(b(this).css("top"),
10)+c/2+"px",left:parseInt(b(this).css("left"),10)+c/2+"px",width:"0px"})})):(c=parseInt(f.squareSize,10),v.each(function(){b(this).css({top:parseInt(b(this).css("top"),10)+c/2+"px",left:parseInt(b(this).css("left"),10)+c/2+"px",width:"0px",height:"0px"})}));C[this.direction].delay();return}l.css({top:a,left:d,width:"1px",height:"1px"})},perform:function(){if(-1<b.inArray(this.direction,["center","top","left","bottom","right"]))l.animate({top:"0px",left:"0px",width:k,height:m},{duration:1E3,easing:"easeInOutQuad"});
else{var a=parseInt(f.squareSize,10);v.each(function(d,c){b(this).animate({top:parseInt(b(c).css("top"),10)-a/2+"px",left:parseInt(b(c).css("left"),10)-a/2+"px",width:a+"px",height:a+"px"},500)})}}}},J={width:"960px",height:"400px",squareSize:"80px",autoplay:!0,showControls:!0,showPause:!0,showPaginator:!0,showThumbnails:!0,showTimer:!0,removeSlidesWithBrokenImages:!0};return this.each(function(){b(this);if(y[f])return y[f].apply(this,Array.prototype.slice.call(arguments,1));if("object"!==typeof f&&
f)b.error("Method "+f+" does not exist on uBillboard");else return y.init.apply(this,[J,f])})}})(jQuery);