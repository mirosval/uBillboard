/*

 uBillboard - Premium Slide for WordPress

 Version: 3.5.3

 Copyright: uDesignStudios (Miroslav Zoricak, Jan Keselak) 2011

*/
(function(b){function B(b){try{console.log(b)}catch(h){}}b.extend(jQuery.easing,{easeInOutQuad:function(b,h,z,l,j){return(h/=j/2)<1?l/2*h*h+z:-l/2*(--h*(h-2)-1)+z},easeInOutCirc:function(b,h,z,l,j){return(h/=j/2)<1?-l/2*(Math.sqrt(1-h*h)-1)+z:l/2*(Math.sqrt(1-(h-=2)*h)+1)+z}});jQuery.fn.fastShow=function(){this.each(function(){this.style.display="block"});return this};jQuery.fn.fastHide=function(){this.each(function(){this.style.display="none"});return this};b.fn.uBillboard=function(g){var h,z,l,
j,r,x,A,p,C,n,s,o,t,D,i,k,q,u={init:function(a,d){function c(){h.add(x).add(l).add(j).css({width:"100%",height:"100%"});i=h.width();k=i*E;h.add(x).add(l).add(j).css({width:i+"px",height:k+"px"});var a=b(".uds-bb-preloader-indicator",h);b(".uds-bb-preloader",h).css({top:parseInt(k,10)/2-a.height()/2+"px",left:parseInt(i,10)/2-a.width()/2+"px"});b(".uds-center",h).each(function(){var a=b(this).outerWidth()/2,c=b(this).outerHeight()/2;b(this).css({top:k/2-c,left:i/2-a})});b(".uds-center-vertical",h).each(function(){var a=
b(this).outerHeight()/2;b(this).css({top:k/2-a})});b(".uds-center-horizontal",h).each(function(){var a=b(this).outerWidth()/2;b(this).css({left:i/2-a})});for(a=0;a<n.length;a++)if(n[a].hasVideo)for(var c=b(".uds-bb-slide-"+a+">*",h),d=0;d<c.length;d++){var f=c.eq(d),m=b(f).attr("width")/b(f).attr("height"),e=b(f).attr("width"),o=b(f).attr("height");b(f).attr("height")>k?(o=k,e=o*m):b(f).attr("width")>i&&(e=i,o=e/m);f.css({position:"absolute",top:k/2-o/2,left:i/2-e/2,width:e,height:o,margin:"auto"})}b(".uds-bb-slide>canvas").each(function(){b(this).css({width:i,
height:k}).attr({width:i,height:k})});b(".uds-bb-slide>.uds-bb-description").each(function(){var a=b(this),c=["top","bottom","height","right","left","width"],d=["font-size","margin-left","margin-top","margin-right","margin-bottom"],f={},m=k/parseInt(g.height,10),e=i/parseInt(g.width,10);typeof a.data("original-position")==="undefined"&&(a.data("original-position",!0),b.each(c,function(c,b){a.data(b,parseInt(a.css(b),10))}),b("h1,h2,h3,h4,h5,h6,p,div,span,ul,ol,li,a",a).each(function(){var a=b(this);
b.each(d,function(b,c){a.data(c,parseInt(a.css(c),10))})}));b.each(c,function(c,b){var d=c<3?m:e,g=a.data(b);f[b]=isNaN(g)?"auto":g*d});b("h1,h2,h3,h4,h5,h6,p,div,span,ul,ol,li,a",a).each(function(){var a=b(this);b.each(d,function(b,c){a.css(c,a.data(c)*e)})});a.css(f)})}h=b(this);z=b(".uds-bb-slides",h);g=b.extend(a,d);h.css("overflow","visible");h.add(z).css({maxWidth:g.width,maxHeight:g.height});i=parseInt(g.width,10);k=parseInt(g.height,10);s={};D=t=!1;o=0;var f=e.preloadRequired();e.initSlides();
e.initAnimationMarkup();var m=f;f&&(e.initPreloader(),m=e.preloadImages());e.initControls();h.on("click",e.handleBillboardClicks);e.setCursor();e.initTouchSupport();m===!1&&(h.trigger("udsBillboardLoadingDidComplete"),e.loadingCompleted());var E=parseInt(g.height,10)/parseInt(g.width,10);c();e.isMobile()?b(window).bind("orientationchange",c):b(window).resize(c)},animateSlide:function(a,d){if(a!==o)if(typeof d!=="boolean"&&(d=!0),n[a]===null)b.error("Slide ID "+a+" does not exist");else{h.trigger("udsBillboardSlideWillChange",
o);var c=n[a];n[o].hasVideo&&e.pauseVideo(n[o]);e.prepareForAnimation(a);e.handleEmbeddedContent(c);var f=0;if(d){var m="fade";if(c.transition!==null&&typeof c.transition==="string")m=c.transition;if(v[m]===null||typeof v[m]!=="object")B('Transition "'+m+'" is not defined'),m="fade";f=v[m].direction;v[m].direction=y[c.direction]===null||typeof y[c.direction]!=="object"?y[f]===null||typeof y[f]!=="object"?"right":f:c.direction;j.css("opacity",1).fastShow();D=!0;v[m].setup!==null&&typeof v[m].setup===
"function"&&v[m].setup(o,a);v[m].perform!==null&&typeof v[m].perform==="function"&&v[m].perform(o,a);f=1E3;if(v[m].duration!==null&&typeof v[m].duration==="number")f=v[m].duration}clearTimeout(s.transitionComplete);s.transitionComplete=setTimeout(function(){l.stop().css({"-webkit-transition":"-webkit-transform 0s","-webkit-transform":"translate3d(0px,0px,0px)",top:"0px",left:"0px",opacity:1});j.css({"-webkit-transition":"all 0s","-webkit-transform":"translate3d(0px,0px,0px)"});e.forceReflow();b(".uds-bb-slide",
l).fastHide();b(".uds-bb-slide-"+c.id,l).fastShow();b(".uds-bb-description",l).fastShow();j.stop().fastHide();D=!1;c.autoplayVideo&&g.pauseOnVideo&&e.playVideo(c);c.kenBurns&&e.kenBurns(c);h.trigger("udsBillboardTransitionDidComplete",a)},f);o=a;h.trigger("udsBillboardSlideDidChange",o);g.pauseOnVideo&&n[o].hasVideo?(p!==null&&typeof p!=="undefined"&&p.fastHide(),clearTimeout(s.nextSlideAnimation)):(c.stop&&(t=!1),e.setCursor(),t?e.animateCountdown(n[o].delay):p!==null&&typeof p!=="undefined"&&p.fastHide(),
t&&!c.stop&&u.play())}},next:function(a){typeof a!=="undefined"&&a.stopPropagation();a=e.getNextSlideId();u.animateSlide(a)},prev:function(a){typeof a!=="undefined"&&a.stopPropagation();a=e.getPrevSlideId();u.animateSlide(a)},random:function(a){typeof a!=="undefined"&&a.stopPropagation();u.animateSlide(Math.floor(Math.random()*n.length+1))},play:function(a){typeof a!=="undefined"&&a.stopPropagation();if(typeof o!=="number"||o===null)o=0;s!==null&&s.nextSlideAnimation!==null&&clearTimeout(s.nextSlideAnimation);
typeof p!=="undefined"&&p!==null&&p.fastShow();t||e.animateCountdown(n[o].delay);clearTimeout(s.nextSlideAnimation);s.nextSlideAnimation=setTimeout(function(){u.next()},n[o].delay);t=!0;h.trigger("didChangePlayingState",{playing:t})},pause:function(a){typeof a!=="undefined"&&a.stopPropagation();t=!1;h.trigger("didChangePlayingState",{playing:t});s.nextSlideAnimation!==null&&clearTimeout(s.nextSlideAnimation);typeof p!=="undefined"&&p!==null&&p.fastHide()},playpause:function(a){t?u.pause(a):u.play(a)}},
e={initSlides:function(){var a={delay:5E3,hasVideo:!1,linkTarget:"",transition:"fade",direction:"",bg:"",bgColor:"transparent",repeat:"no-repeat",link:"",stop:!1,autoplayVideo:!0,kenBurns:!1,kenBurnsSpeed:4E3,retina:!1,html:""};n=[];b(".uds-bb-slide",h).each(function(d,c){var f=e.maybeUseRetina(b(".uds-bb-bg-image",c).remove().attr("src"),g.slides[d]),f=b.extend({},a,g.slides[d],{id:d,bg:f,link:b(".uds-bb-link",c).remove().attr("href"),html:b(c).remove().html()}),m=b("<div class='uds-bb-slide-"+d+
" uds-bb-slide'>");m.css({display:"none",maxWidth:g.width,maxHeight:g.height,width:"100%",height:"100%"}).css(e.getSlideBackgroundCSS(f)).html(f.html);f.cache=m;n.push(f)})},preloadRequired:function(){var a=!0;b(".uds-bb-bg-image",h).each(function(){var d=b(this).get(0);a=a&&d.complete});return!a},initPreloader:function(){h.append('<div class="uds-bb-preloader-wrapper"><div class="uds-bb-preloader"><div class="uds-bb-preloader-indicator"></div></div></div>');C=b(".uds-bb-preloader-wrapper",h);var a=
b(".uds-bb-preloader-indicator",C);b(".uds-bb-preloader",h).css({top:parseInt(k,10)/2-a.height()/2+"px",left:parseInt(i,10)/2-a.width()/2+"px"})},updatePreloader:function(a){var d=b(".uds-bb-preloader-indicator",C);d.stop().animate({left:"-"+Math.round((1-a)*d.width())+"px"},200);a>=1&&d.fadeOut("200",function(){C.remove()})},preloadImages:function(){for(var a=0,d=n.length,c=!1,f=0;f<d;f++)n[f].bg!==""&&(c=!0);if(!c)return e.updatePreloader(1),h.trigger("udsBillboardLoadingDidComplete"),e.loadingCompleted(),
!1;for(f=0;f<d;f++)n[f].bg===""?++a:b("<img>").data("slideID",f).load(function(){++a;e.updatePreloader(a/d);a===d&&(h.trigger("udsBillboardLoadingDidComplete"),e.loadingCompleted())}).error(function(){var c=b(this).data("slideID");B("Failed to load image: "+n[c].bg);++a;e.updatePreloader(a/d);a===d&&(h.trigger("udsBillboardLoadingDidComplete"),e.loadingCompleted());g.removeSlidesWithBrokenImages===!0&&n.splice(c,1)}).attr("src",n[f].bg);return!0},loadingCompleted:function(){o=0;var a=n[o];e.getSlideBackgroundCSS(a);
b(".uds-bb-slide-0",l).fastShow().fadeTo(300,1);b(".uds-bb-description",l).fastShow();e.handleEmbeddedContent(a);A.delay(300).fadeTo(300,1);a.kenBurns&&(e.prepareKenBurns(a),e.kenBurns(a));var d=g.pauseOnVideo&&a.hasVideo;g.autoplay===!0?d?a.autoplayVideo&&e.playVideo(a):(e.animateCountdown(n[o].delay),u.play()):typeof p!=="undefined"&&p!==null&&p.fastHide()},initAnimationMarkup:function(){b(".uds-bb-slides",h).append("<div class='uds-stage'>").append("<div class='uds-next'>");l=b(".uds-stage",h);
j=b(".uds-next",h);j.fastHide();b(l).add(j).css({maxWidth:g.width,maxHeight:g.height,width:"100%",height:"100%",opacity:0});if(!e.isSlowBrowser())for(var a=parseInt(g.width,10),d=parseInt(g.height,10),c=parseInt(g.squareSize,10),a=Math.ceil(a/c),d=Math.ceil(d/c),c=0;c<d;c++)for(var f=0;f<a;f++)b("<div>",{"class":"uds-square uds-column-"+f+" uds-row-"+c+" uds-square-"+(f+a*c)}).data("position",{x:f,y:c}).append(b("<div>",{"class":"uds-square-inside"})).appendTo(j);e.resetAnimation();r=b(".uds-square",
h);x=b(".uds-square-inside",h);A=b(".uds-bb-controls",h);for(a=0;a<n.length;a++)d=n[a],l.append(d.cache.clone()),d.hasVideo||x.append(d.cache.clone());b(">div",l).add(">div",x).fastHide();e.createCountdown()},resetAnimation:function(){for(var a=parseInt(g.width,10),d=parseInt(g.height,10),c=parseInt(g.squareSize,10),f=Math.ceil(a/c),m=Math.ceil(d/c),e=0;e<m;e++)for(var i=0;i<f;i++)b(".uds-square-"+(i+f*e),h).css({width:c,height:c,top:e*c,left:i*c,opacity:1}).stop(!0,!0).find(".uds-square-inside").css({width:a,
height:d,top:-(e*c),left:-(i*c),opacity:1}).stop(!0,!0);l.css({opacity:1}).add(j).css({top:"0px",left:"0px"})},prepareForAnimation:function(a){var d=n[o],c=n[a];typeof d==="undefined"||d===null?B("Slide "+o+" does not exist! (Current Slide)"):typeof c==="undefined"||c===null?B("Slide "+a+" does not exist! (Next Slide)"):(b(".uds-bb-slide",l).fastHide(),b(".uds-bb-slide-"+d.id,l).fastShow(),b(".uds-bb-description",l).fastShow(),e.resetAnimation(),clearInterval(s.kenBurnsCanvasTimer),c.kenBurns&&e.prepareKenBurns(c),
c.hasVideo||e.isSlowBrowser()?(b(".uds-bb-square",j).length>0&&r.detach(),b(">.uds-bb-slide",j).remove(),j.append(b(">.uds-bb-slide-"+c.id,l).clone().css("display","block"))):(b(".uds-bb-square",j).length===0&&(b(">.uds-bb-slide",j).remove(),j.append(r)),b(".uds-bb-slide",x).fastHide(),b(".uds-bb-slide-"+c.id,x).fastShow(),b(".uds-bb-description",x).fastShow(),b(".uds-bb-slide-"+c.id,x).css({width:i+"px",height:k+"px"})))},handleBillboardClicks:function(){var a=n[o];if(typeof a.link==="string"&&a.link!==
""&&a.link!=="#")a.linkTarget==="_blank"?window.open(a.link,"_blank"):window.location.href=a.link},initControls:function(){A=b(".uds-bb-controls",h);A.fastShow().css({maxWidth:g.width,maxHeight:g.height,width:"100%",height:"100%",opacity:0});e.getIEVersion()>-1&&e.getIEVersion()<8&&b(".uds-bb-paginator").css("position","static");var a=b(".uds-bb-playpause",h),d=b(".uds-bb-next",h),c=b(".uds-bb-prev",h),f=b(".uds-bb-paginator",h),m=b(".uds-bb-position-indicator-bullets",h),i=b(".uds-bb-thumbnails",
h),j=b(".uds-bb-thumb",i),l=b(".uds-bb-thumbnail-container",i);a.click(u.playpause);d.click(u.next);c.click(u.prev);a.addClass("play");h.bind("didChangePlayingState",function(c,b){a.removeClass("play pause");b.playing?a.addClass("pause"):a.addClass("play")});b(".uds-bb-position-indicator",h).text("1/"+n.length);for(var k="",p=0;p<n.length;p++)k+="<div class='uds-bb-bullet'></div>";m.append(k).find("div:first").addClass("active");b("div",m).click(function(a){typeof a!=="undefined"&&a.stopPropagation();
u.animateSlide(b(this).index())});h.bind("udsBillboardSlideDidChange",function(){b(".uds-bb-position-indicator").text(o+1+"/"+n.length);b("div",m).removeClass("active").eq(o).addClass("active");j.css("background-color","").removeClass("active").eq(o).addClass("active").css("background-color",g.thumbnailHoverColor);g.thumbnailHoverColorTransparent===!0&&j.css("background-color","transparent")});j.removeClass("active").eq(0).addClass("active");j.click(function(a){typeof a!=="undefined"&&a.stopPropagation();
u.animateSlide(b(this).index())});i.is(".top,.bottom")&&l.css("width","10000px");j.each(function(a){var c=b("img",this);c.css({width:c.attr("width")+"px",height:c.attr("height")+"px"});b(this).css({width:c.attr("width")+"px",height:c.attr("height")+"px"});e.shouldUseRetina()&&c.attr("src",c.attr("src").replace("-thumb.","-thumb-retina."));n[a].bg===""&&!n[a].hasVideo&&(c.replaceWith("<div>"),b("div",this).css({width:c.attr("width")+"px",height:c.attr("height")+"px",backgroundColor:n[a].bgColor}));
if(g.thumbnailHoverColorTransparent===!0)b(this).css("background-color","transparent");else{var d=b(this).css("background-color"),f="";d.indexOf("rgb(")>-1?(a=d.match(/rgb\(([0-9]{1,3}), ([0-9]{1,3}), ([0-9]{1,3})/),f={r:parseInt(a[1],10),g:parseInt(a[2],10),b:parseInt(a[3],10)}):f={r:parseInt(d.substr(1,2),16),g:parseInt(d.substr(3,2),16),b:parseInt(d.substr(5,2),16)};b(this).is(".active")&&b(this).css("background-color",g.thumbnailHoverColor);var m={r:parseInt(g.thumbnailHoverColor.substr(1,2),
16),g:parseInt(g.thumbnailHoverColor.substr(3,2),16),b:parseInt(g.thumbnailHoverColor.substr(5,2),16)};b(this).hover(function(){b(this).is(".active")?b(this).css("background-color",g.thumbnailHoverColor):b(this).css("background-color",d).stop().animate({opacity:1},{duration:200,step:function(a,c){var b=((new Date).getTime()-c.startTime)/c.options.duration;c.elem.style.backgroundColor="rgb("+Math.round(f.r*(1-b)+m.r*b)+","+Math.round(f.g*(1-b)+m.g*b)+","+Math.round(f.b*(1-b)+m.b*b)+")"}})},function(){b(this).is(".active")?
b(this).css("background-color",g.thumbnailHoverColor):b(this).css("background-color",g.thumbnailHoverColor).stop().animate({opacity:1},{duration:200,step:function(a,c){var b=((new Date).getTime()-c.startTime)/c.options.duration;c.elem.style.backgroundColor="rgb("+Math.round(f.r*b+m.r*(1-b))+","+Math.round(f.g*b+m.g*(1-b))+","+Math.round(f.b*b+m.b*(1-b))+")"}})})}});h.has(".uds-bb-thumbnails.top:not(.inside)").css("margin-top",i.outerHeight());h.has(".uds-bb-thumbnails.bottom:not(.inside)").css("margin-bottom",
i.outerHeight());h.has(".uds-bb-thumbnails.left:not(.inside)").css("margin-left",i.outerWidth());h.has(".uds-bb-thumbnails.right:not(.inside)").css("margin-right",i.outerWidth());b("<div class='uds-thumbnails-shadow-left'>").appendTo(i);b("<div class='uds-thumbnails-shadow-right'>").appendTo(i);var q,r,v,t=0,x=i.is(".right,.left")?"vertical":"horizontal";x==="vertical"?(q=i.height(),k=(j.outerHeight(!0)-j.outerHeight())/2,r=j.length*j.outerHeight(!0)-(j.length-1)*k,v="top",l.css("height",r+"px")):
(q=i.width(),k=j.outerWidth(!0),k===0&&(k=parseInt(b("img",j).attr("width"),10)+18),r=j.length*k,v="left",l.css("width",r+"px"));q>r&&(t=q/2-r/2,l.css(v,t+"px"));var y=function(a){q=x==="vertical"?i.height():i.width();q>r&&(t=q/2-r/2);var c=0,b=0;a!==null&&typeof a!=="undefined"&&(c=x==="vertical"?a.pageY-i.offset().top:a.pageX-i.offset().left);b=c-q/2;b=b/(q/2)*5;if(b<0&&t>0||b>0&&t<r-q)t+=b;if((a===null||typeof a==="undefined")&&q>r)t=-(q/2-r/2);else if(q>r)return;l.css(v,-t+"px")};e.isMobile()?
i.css("overflow","scroll"):i.bind({"mouseenter mousemove":function(a){clearInterval(s.thumbMove);s.thumbMove=setInterval(function(){y(a)},10)},mouseleave:function(){clearInterval(s.thumbMove)}});b(window).resize(function(){i.length!==0&&(clearInterval(s.thumbMove),y())});var w=b("");g.showControls==="hover"&&(w=w.add(d).add(c));g.showPause==="hover"&&(w=w.add(a));g.showPaginator==="hover"&&(w=w.add(m).add(b(".uds-bb-position-indicator",h)));g.showThumbnails==="hover"&&(w=w.add(i));if((g.showPaginator===
"hover"||g.showPause==="hover"||g.showControls==="hover")&&g.showPaginator!==!0&&g.showPause!==!0&&g.showControls!==!0)w=f;k=b(".uds-bb-position-indicator-bullets-container",h);if(k.length>0&&(g.showPause==="hover"||g.showPaginator==="hover"))w=w.add(k);g.showPaginator===!1&&g.showPause===!1&&g.showControls===!1&&f.fadeTo(0,0);w.fadeTo(0,0);h.hover(function(){(g.showPaginator!==!1||g.showPause!==!1||g.showControls!==!1)&&w.stop().fadeTo(300,1)},function(){w.stop().fadeTo(300,0)});g.showControls===
!1&&(d.fastHide(),c.fastHide());g.showPause===!1&&a.fastHide();g.showPaginator===!1&&(m.fastHide(),b(".uds-bb-position-indicator",h).fastHide());g.showThumbnails===!1&&i.fastHide();b(">*",k).not(":hidden").length===0&&k.fastHide()},initTouchSupport:function(){b(".uds-bb-slides",h).on("touchstart touchmove touchend touchcancel",function(a){if(!D){var d=a.originalEvent;d.type==="touchstart"&&(q={startX:d.touches[0].clientX,time:(new Date).getTime(),absoluteStartTime:(new Date).getTime()},b(".uds-bb-slides",
h).css("overflow","hidden"),clearTimeout(s.nextSlideAnimation),typeof p==="object"&&p.fastHide(),l.add(j).css("-webkit-transition","none"),e.forceReflow(),l.stop().css({left:0,"-webkit-transform":"translate3d(0px,0px,0px)"}),j.stop().css({left:i,"-webkit-transform":"translate3d(0px,0px,0px)"}),e.forceReflow());if(d.type==="touchmove"){var c=d.touches[0].clientX-q.startX,f=d.touches[0].clientX-q.currentX;q.currentX=d.touches[0].clientX;var g=(new Date).getTime(),k=g-q.time;q.time=g;q.speed=f/(k/1E3);
(f=(new Date).getTime()-q.absoluteStartTime<150)||a.preventDefault();c>0?(q.direction=-1,f=e.getPrevSlideId()):(q.direction=1,f=e.getNextSlideId());q.slideId=f;n[o].hasVideo&&e.pauseVideo(n[o]);e.prepareForAnimation(f);e.handleEmbeddedContent(n[o]);l.add(j).css("-webkit-transition","none");e.forceReflow();l.css("-webkit-transform","translate3d("+c+"px,0px,0px)");q.left=c>0?-i+c:i+c;j.fastShow().css({"-webkit-transform":"translate3d("+q.left+"px,0px,0px)",opacity:1});e.forceReflow()}if(d.type==="touchend"||
d.type==="touchcancel")d=Math.abs(q.left)<i/2,c=Math.abs(q.speed)>100,f=(new Date).getTime()-q.absoluteStartTime<150,l.add(j).css({left:0,"-webkit-transition":"-webkit-transform 300ms linear"}),e.forceReflow(),(d||c)&&!f?(l.css({"-webkit-transform":"translate3d("+-q.direction*i+"px,0px,0px)"}),j.fastShow().css({"-webkit-transform":"translate3d(0px,0px,0px)"}),e.forceReflow(),l.one("webkitTransitionEnd",function(){u.animateSlide(q.slideId,!1)}),a.preventDefault()):(l.css({"-webkit-transform":"translate3d(0px,0px,0px)"}),
j.fastShow().css({"-webkit-transform":"translate3d("+q.direction*i+"px,0px,0px)"}),e.forceReflow(),f||a.preventDefault())}})},forceReflow:function(){j.add(l).css("offsetTop")},setCursor:function(){var a="default",b=n[o];typeof b.link==="string"&&b.link!==""&&b.link!=="#"&&(a="pointer");l.add(".uds-bb-paginator",h).css("cursor",a)},getNextSlideId:function(){var a=o+1;return typeof n[a]==="undefined"?0:a},getPrevSlideId:function(){var a=o-1;return typeof n[a]==="undefined"?n.length-1:a},createCountdown:function(){if(g.showTimer!==
!1){var a=100,d=a,c=null,c=null;window.devicePixelRatio&&(a=d*window.devicePixelRatio);p=b('<div class="uds-bb-countdown"></div>').appendTo(A);c=p.append('<canvas width="'+a+'" height="'+a+'">').find("canvas").get(0);b("canvas",p).css({width:d+"px",height:d+"px"});c&&typeof c.getContext==="function"?(c=c.getContext("2d"),c.lineWidth=3,c.strokeStyle="white",c.shadowOffsetX=0,c.shadowOffsetY=0,c.shadowBlur=2,c.shadowColor="black",p.data("context",c)):(p.remove(),p=null)}},animateCountdown:function(a){if(!(p===
null||typeof p==="undefined"||g.showTimer===!1)){var b=p.data("context"),c=0,f=100;if(typeof b==="undefined")clearInterval(s.countDown);else{if(a!==!1){var m=(new Date).getTime();p.data("start",m);p.data("duration",a);clearInterval(s.countDown);s.countDown=setInterval(function(){e.animateCountdown(!1)},30)}else c=(new Date).getTime()-p.data("start"),a=p.data("duration");c/a>=1&&clearInterval(s.countDown);window.devicePixelRatio&&(f=100*window.devicePixelRatio);b.clearRect(0,0,f,f);b.beginPath();b.arc(f/
2,f/2,f/5,-Math.PI/2,-Math.PI/2+2*Math.PI*(c/a),!1);b.lineWidth=3*f/100;b.stroke()}}},getSlideBackgroundCSS:function(a){return a.bg!==""?{backgroundColor:a.bgColor,backgroundImage:"url("+a.bg+")",backgroundRepeat:a.repeat}:{backgroundColor:a.bgColor,backgroundImage:"",backgroundRepeat:a.repeat}},handleEmbeddedContent:function(a){if(a.hasVideo&&a.embeddecContentHandled!==!0){var d=b(">.uds-bb-slide-"+a.id+">*",l);d.is("object")&&(d.prepend("<param name='wmode' value='opaque' />"),b("embed",d).attr("wmode",
"opaque"));d.css({position:"absolute",top:parseInt(g.height,10)/2-d.attr("height")/2,left:parseInt(g.width,10)/2-d.attr("width")/2,margin:"auto"});a.embeddecContentHandled=!0}},playVideo:function(a){if(!(typeof window.postMessage!=="function"||typeof JSON==="undefined")){a=b(".uds-stage .uds-bb-slide-"+a.id,h);a=b("iframe",a);b(window).off("message");for(var d=0;d<b("iframe").length;d++)if(b("iframe").eq(d).get(0)===a.get(0)){var c=a.get(0).getAttribute("src").split("?")[0];c.substr(0,2)==="//"&&
(c=window.location.protocol+c);window.frames[d].postMessage(JSON.stringify({event:"command",func:"playVideo",args:null,id:a.attr("id")}),c);window.frames[d].postMessage(JSON.stringify({method:"play"}),c);var f=d;b(window).on("message",function(a){a=a.originalEvent;a.origin==="http://www.youtube.com"?(a=JSON.parse(a.data),a.event==="onStateChange"&&a.info.playerState===0&&u.play()):(a=JSON.parse(a.data),typeof a.event!=="undefined"&&a.event==="ready"?window.frames[f].postMessage(JSON.stringify({method:"addEventListener",
value:"finish"}),c):typeof a.event!=="undefined"&&a.event==="finish"&&u.play())})}}},pauseVideo:function(a){if(!(typeof window.postMessage!=="function"||typeof JSON==="undefined"))for(var a=b(".uds-stage .uds-bb-slide-"+a.id,h),a=b("iframe",a),d=0;d<b("iframe").length;d++)b("iframe").eq(d).get(0)===a.get(0)&&(window.frames[d].postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:null,id:a.attr("id")}),"*"),window.frames[d].postMessage(JSON.stringify({method:"pause"}),"*"))},prepareKenBurns:function(a){if(!a.hasVideo){if(typeof a.kenBurnsImageCache===
"undefined"){var d=b(".uds-bb-slide-"+a.id,h),c=new Image;a.kenBurnsImage=c;var f=b("<canvas>").css({position:"relative",width:i||g.width,height:k||g.height}).attr({width:i||g.width,height:k||g.height}).appendTo(d).get(0);if(typeof f.getContext==="function"){var e=f.getContext("2d");a.kenBurnsCanvasCache=e;a.kenBurnsImageCache=!1;c.onLoad=function(){e.clearRect(0,0,i,k);e.drawImage(c,0,0)};c.src=a.bg.replace("-full.","-ken.")}else b(f).remove(),a.kenBurnsCanvasCache=!1,c.src=a.bg.replace("-full.",
"-ken."),b(c).addClass("uds-ken-burns"),d.css({overflow:"hidden"}).append(c),a.kenBurnsImageCache=b(".uds-bb-slide-"+a.id+" img.uds-ken-burns",h),a.kenBurnsImageCache.css({position:"relative",display:"block","-ms-interpolation-mode":"bicubic"})}a.kenBurnsCanvasCache?a.kenBurnsCanvasStartingCSS={top:0,left:0,width:i,height:k}:a.kenBurnsImageCache.css({top:0,left:0,width:i,height:k})}},kenBurns:function(a){if(!(a.hasVideo||typeof a.kenBurnsImageCache==="undefined"&&typeof a.kenBurnsCanvasCache==="undefined"))if(a.kenBurnsCanvasCache){clearInterval(s.kenBurnsCanvasTimer);
var b=new Date,c=e.kenBurnsCSS(!1);a.kenBurnsCanvasCache.clearRect(0,0,i,k);a.kenBurnsCanvasCache.drawImage(a.kenBurnsImage,0,0,i,k);s.kenBurnsCanvasTimer=setInterval(function(){var f=((new Date).getTime()-b.getTime())/a.kenBurnsSpeed,g=a.kenBurnsCanvasStartingCSS;a.kenBurnsCanvasCache.clearRect(0,0,i,k);a.kenBurnsCanvasCache.drawImage(a.kenBurnsImage,(1-f)*g.left+f*c.left,(1-f)*g.top+f*c.top,(1-f)*g.width+f*c.width,(1-f)*g.height+f*c.height);if(f>=1)b=new Date,a.kenBurnsCanvasStartingCSS=c,c=e.kenBurnsCSS(!1,
c)},20)}else c=e.kenBurnsCSS(!0),a.kenBurnsImageCache.eq(0).stop().animate(c,{duration:a.kenBurnsSpeed,easing:"easeInOutQuad",complete:function(){a.id===o&&e.kenBurns(a,c)}})},kenBurnsCSS:function(a,b){function c(){var a=0;a+=Math.abs(f.scale-1);a+=Math.abs(f.top);a+=Math.abs(f.left);return a}var f,e,h;typeof b=="undefined"&&(b={top:0,left:0,width:i,height:k});do f={scale:1.2-Math.random()*0.4,top:-0.2+Math.random()*0.4,left:-0.2+Math.random()*0.4};while(c()<0.2);e={top:f.top*k,left:f.left*i,width:i*
f.scale,height:k*f.scale};h=parseInt(g.height,10)/parseInt(g.width,10);if(e.top>0)e.top=0;if(e.left>0)e.left=0;if(e.top+e.height<k)e.height=-e.top+k,e.width=e.height/h;if(e.left+e.width<i)e.width=-e.left+i,e.height=e.width*h;a&&(e.top+="px",e.left+="px",e.width+="px",e.height+="px");return e},getIEVersion:function(){var a=-1;navigator.appName=="Microsoft Internet Explorer"&&/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)!=null&&(a=parseFloat(RegExp.$1));return a},isSlowBrowser:function(){return e.isMobile()||
e.getIEVersion()>-1&&e.getIEVersion()<9},isMobile:function(){var a=navigator.userAgent,a={ios:b.isArray(a.match(/(iPhone|iPod|iPad)/)),blackberry:b.isArray(a.match(/BlackBerry/)),android:b.isArray(a.match(/Android/))};return a.ios||a.blackberry||a.android?!0:!1},shouldUseRetina:function(){return typeof window.devicePixelRatio==="number"?window.devicePixelRatio>1:!1},maybeUseRetina:function(a,b){var c=typeof b.retina!=="undefined"?b.retina:!1;return e.shouldUseRetina()&&c?a.replace("-full.","-full-retina."):
a},pos:function(a){return Math.abs(parseInt(a,10))+"px"},neg:function(a){return"-"+Math.abs(parseInt(a,10))+"px"}},y={none:{delay:b.noop},intuitive:{delay:b.noop},intuitiveVertical:{delay:b.noop},left:{delay:function(){for(var a=Math.ceil(parseInt(g.width,10)/parseInt(g.squareSize,10)),d=0;d<a;d++)b(".uds-column-"+d,h).delay(d*(600/a))}},right:{delay:function(){for(var a=Math.ceil(parseInt(g.width,10)/parseInt(g.squareSize,10)),d=0;d<a;d++)b(".uds-column-"+d,h).delay(600-d*(600/a))}},top:{delay:function(){for(var a=
Math.ceil(parseInt(g.height,10)/parseInt(g.squareSize,10)),d=0;d<a;d++)b(".uds-row-"+d,h).delay(d*(600/a))}},bottom:{delay:function(){for(var a=Math.ceil(parseInt(g.height,10)/parseInt(g.squareSize,10)),d=0;d<a;d++)b(".uds-row-"+d,h).delay(600-d*(600/a))}},center:{delay:function(){for(var a=Math.ceil(parseInt(g.height,10)/parseInt(g.squareSize,10)),d=Math.ceil(parseInt(g.width,10)/parseInt(g.squareSize,10)),c=0;c<d;c++)for(var f=0;f<a;f++){var e=Math.sqrt(Math.pow(c-d/2+0.5,2)+Math.pow(f-a/2+0.5,
2))/Math.sqrt(Math.pow(d/2,2)+Math.pow(a/2,2));b(".uds-square-"+(f*d+c)).delay(700*e)}}},randomSquares:{delay:function(){r.each(function(){b(this).delay(Math.random()*700)})}},spiralIn:{delay:function(){for(var a=Math.ceil(parseInt(g.width,10)/parseInt(g.squareSize,10)),d=Math.ceil(parseInt(g.height,10)/parseInt(g.squareSize,10)),c=0,f=a-1,e=0,h=d-1,i=0,j=0,k=0;i<a*d;)b(".uds-square-"+(a*k+j)).delay(1E3*(i/(a*d))),k===e&&j<f?j++:j===f&&k<h?k++:k===h&&j>c?j--:(k--,k===e&&(j++,k++,c++,f--,e++,h--)),
i++}},spiralOut:{delay:function(){for(var a=Math.ceil(parseInt(g.width,10)/parseInt(g.squareSize,10)),d=Math.ceil(parseInt(g.height,10)/parseInt(g.squareSize,10)),c=0,f=a-1,e=0,h=d-1,i=0,j=0,k=0;i<a*d;)b(".uds-square-"+(a*k+j)).delay(1E3-1E3*(i/(a*d))),k===e&&j<f?j++:j===f&&k<h?k++:k===h&&j>c?j--:(k--,k===e&&(j++,k++,c++,f--,e++,h--)),i++}},chess:{delay:function(){for(var a=Math.ceil(parseInt(g.height,10)/parseInt(g.squareSize,10)),d=Math.ceil(parseInt(g.width,10)/parseInt(g.squareSize,10)),c=0;c<
d;c++)for(var f=0;f<a;f++){var e=f%2===0&&c%2===0||f%2===1&&c%2===1?0:1;b(".uds-square-"+(f*d+c)).delay(200*e)}}},zigzagHorizontal:{delay:function(){for(var a=Math.ceil(parseInt(g.height,10)/parseInt(g.squareSize,10)),d=Math.ceil(parseInt(g.width,10)/parseInt(g.squareSize,10)),c=0;c<d;c++)for(var f=0;f<a;f++){var e=(f*a+(f%2===0?c:d-c))/(a*a+d/2);b(".uds-square-"+(f*d+c)).delay(700*e)}}},zigzagVertical:{delay:function(){for(var a=Math.ceil(parseInt(g.height,10)/parseInt(g.squareSize,10)),d=Math.ceil(parseInt(g.width,
10)/parseInt(g.squareSize,10)),c=0;c<d;c++)for(var e=0;e<a;e++){var h=(c*d+(c%2===0?e:a-e))/(d*d+a/2);b(".uds-square-"+(e*d+c)).delay(700*h)}}}},v={none:{duration:0,direction:"",setup:function(){j.fastHide()},perform:b.noop()},fade:{duration:1500,direction:"",setup:function(){(e.isSlowBrowser()?j:r).css({opacity:0})},perform:function(){var a=e.isSlowBrowser()?j:r;y[this.direction].delay();a.animate({opacity:1},{duration:500})}},crossFade:{duration:1E3,direction:"",setup:function(){(e.isSlowBrowser()?
j:r).css({opacity:0})},perform:function(){y[this.direction].delay();l.animate({opacity:0},{duration:1E3});(e.isSlowBrowser()?j:r).animate({opacity:1},{duration:500})}},slide:{duration:700,direction:"right",setup:function(a,d){b(".uds-bb-slides",h).css({overflow:"hidden"});l.css({top:"0px",left:"0px"});var c=this.direction;if(c==="intuitive"||c==="intuitiveVertical")c=(a<d||d===0&&a===n.length-1)&&!(d===n.length-1&&a===0)?c==="intuitive"?"right":"top":c==="intuitive"?"left":"bottom";c==="left"?j.fastShow().css({top:"0px",
left:e.neg(i)}):c==="top"?j.fastShow().css({top:e.neg(k),left:"0px"}):c==="bottom"?j.fastShow().css({top:e.pos(k),left:"0px"}):c==="top"?j.fastShow().css({top:"0px",left:e.pos(i)}):c==="zigzagHorizontal"?(parseInt(g.squareSize,10),r.each(function(){b(this).css({opacity:0,top:parseInt(b(this).css("top"),10)-k+"px"})}),y[c].delay()):this.direction==="zigzagVertical"?(parseInt(g.squareSize,10),r.each(function(){b(this).css({opacity:0,left:parseInt(b(this).css("left"),10)-i+"px"})}),y[c].delay()):j.fastShow().css({top:"0px",
left:e.pos(i)})},perform:function(a,d){var c={duration:700,easing:"easeInOutQuad"},f=this.direction;if(f==="intuitive"||f==="intuitiveVertical")f=(a<d||d===0&&a===n.length-1)&&!(d===n.length-1&&a===0)?f==="intuitive"?"right":"top":f==="intuitive"?"left":"bottom";f==="left"?(l.animate({left:e.pos(i)},c),j.animate({left:"0px"},c)):f==="top"?(l.animate({top:e.pos(k)},c),j.animate({top:"0px"},c)):f==="bottom"?(l.animate({top:e.neg(k)},c),j.animate({top:"0px"},c)):f==="top"?(l.animate({left:e.neg(i)},
c),j.animate({left:"0px"},c)):f==="zigzagHorizontal"?(parseInt(g.squareSize,10),r.each(function(){b(this).animate({opacity:1,top:parseInt(b(this).css("top"),10)+k+"px"},c)})):f==="zigzagVertical"?(parseInt(g.squareSize,10),r.each(function(){b(this).animate({opacity:1,left:parseInt(b(this).css("left"),10)+i+"px"},c)})):(l.animate({left:e.neg(i)},c),j.animate({left:"0px"},c))}},scale:{duration:1100,direction:"",setup:function(){var a,d,c;if(this.direction==="right")a=e.pos(k/2),d=e.pos(i);else if(this.direction===
"left")a=e.pos(k/2),d="0px";else if(this.direction==="top")a="0px",d=e.pos(i/2);else if(this.direction==="bottom")a=e.pos(k),d=e.pos(i/2);else if(this.direction==="center")a=e.pos(k/2),d=e.pos(i/2);else{this.direction==="zigzagHorizontal"?(c=parseInt(g.squareSize,10),r.each(function(){b(this).css({top:parseInt(b(this).css("top"),10)+c/2+"px",left:parseInt(b(this).css("left"),10)+c/2+"px",height:"0px"})})):this.direction==="zigzagVertical"?(c=parseInt(g.squareSize,10),r.each(function(){b(this).css({top:parseInt(b(this).css("top"),
10)+c/2+"px",left:parseInt(b(this).css("left"),10)+c/2+"px",width:"0px"})})):(c=parseInt(g.squareSize,10),r.each(function(){b(this).css({top:parseInt(b(this).css("top"),10)+c/2+"px",left:parseInt(b(this).css("left"),10)+c/2+"px",width:"0px",height:"0px"})}));y[this.direction].delay();return}j.css({top:a,left:d,width:"1px",height:"1px"})},perform:function(){if(b.inArray(this.direction,["center","top","left","bottom","right"])>-1)j.animate({top:"0px",left:"0px",width:i,height:k},{duration:1E3,easing:"easeInOutQuad"});
else{var a=parseInt(g.squareSize,10);r.each(function(d,c){b(this).animate({top:parseInt(b(c).css("top"),10)-a/2+"px",left:parseInt(b(c).css("left"),10)-a/2+"px",width:a+"px",height:a+"px"},500)})}}}},F={width:"960px",height:"400px",squareSize:"80px",autoplay:!0,showControls:!0,showPause:!0,showPaginator:!0,showThumbnails:!0,showTimer:!0,removeSlidesWithBrokenImages:!0};return this.each(function(){b(this);if(u[g])return u[g].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof g==="object"||
!g)return u.init.apply(this,[F,g]);else b.error("Method "+g+" does not exist on uBillboard")})}})(jQuery);